"use strict";(self.webpackChunkclg_web_frontend=self.webpackChunkclg_web_frontend||[]).push([[257],{5257:(e,s,o)=>{o.r(s),o.d(s,{default:()=>a});var r=o(5043),t=o(9722),l=o(579);const a=()=>{const[e,s]=(0,r.useState)(null),[o,a]=(0,r.useState)(null),[i,n]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),[p,u]=(0,r.useState)(""),m=(0,r.useRef)(null);return(0,l.jsxs)("div",{className:"upload-photo-container",children:[(0,l.jsx)("h1",{children:"Upload Profile Photo"}),(0,l.jsx)("p",{children:"Upload and crop profile picture for ID card, attendance logs, and dashboard."}),p&&(0,l.jsx)("div",{className:"error-message",style:{color:"red",marginBottom:"10px"},children:p}),c&&(0,l.jsx)("div",{className:"success-message",style:{color:"green",marginBottom:"10px"},children:c}),(0,l.jsxs)("div",{className:"upload-section",children:[(0,l.jsx)("input",{type:"file",ref:m,onChange:e=>{const o=e.target.files[0];if(o){if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(o.type))return void u("Please select a valid image file (JPEG, PNG, GIF)");if(o.size>5242880)return void u("File size must be less than 5MB");s(o),u("");const e=new FileReader;e.onload=e=>a(e.target.result),e.readAsDataURL(o)}},accept:"image/*",style:{marginBottom:"10px"}}),o&&(0,l.jsxs)("div",{className:"preview-section",style:{marginBottom:"20px"},children:[(0,l.jsx)("h3",{children:"Preview:"}),(0,l.jsx)("img",{src:o,alt:"Profile Preview",style:{maxWidth:"200px",maxHeight:"200px",borderRadius:"50%",objectFit:"cover",border:"2px solid #ccc"}})]}),(0,l.jsxs)("div",{className:"upload-actions",children:[(0,l.jsx)("button",{onClick:async()=>{if(e){n(!0),u(""),d("");try{const o=localStorage.getItem("token"),r=new FormData;r.append("profilePicture",e);const l={headers:{Authorization:"Bearer ".concat(o),"Content-Type":"multipart/form-data"}};await t.A.post("http://localhost:5000/api/staff/profile-picture",r,l);d("Profile picture uploaded successfully!"),s(null),a(null),m.current&&(m.current.value=""),setTimeout(()=>{window.location.reload()},1500)}catch(p){var o,r;u((null===(o=p.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.message)||"Failed to upload profile picture")}finally{n(!1)}}else u("Please select a file first")},disabled:!e||i,style:{padding:"10px 20px",marginRight:"10px",backgroundColor:e&&!i?"#007bff":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:e&&!i?"pointer":"not-allowed"},children:i?"Uploading...":"Upload Photo"}),(0,l.jsx)("button",{onClick:()=>{s(null),a(null),u(""),d(""),m.current&&(m.current.value="")},disabled:i,style:{padding:"10px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:i?"not-allowed":"pointer"},children:"Cancel"})]})]}),(0,l.jsxs)("div",{className:"upload-info",style:{marginTop:"20px",fontSize:"14px",color:"#666"},children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Supported formats:"})," JPEG, PNG, GIF"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Maximum file size:"})," 5MB"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Recommended:"})," Square images (1:1 aspect ratio) for best results"]})]})]})}}}]);
//# sourceMappingURL=257.e8d83ba7.chunk.js.map