"use strict";(self.webpackChunkclg_web=self.webpackChunkclg_web||[]).push([[257,415],{3137:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(5043),n=s(579);const r=()=>{const[e,t]=(0,a.useState)(null),[s,r]=(0,a.useState)([]),[l,i]=(0,a.useState)(null),[c,o]=(0,a.useState)(!1),[d,h]=(0,a.useState)(""),[u,m]=(0,a.useState)("fees"),[x,p]=(0,a.useState)("semester");(0,a.useEffect)(()=>{j(),f()},[]),(0,a.useEffect)(()=>{null!==l&&void 0!==l&&l.department&&g(l.department)},[l]);const j=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("http://localhost:5000/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();i(e)}}catch(e){console.error("Error fetching student info:",e)}},g=async e=>{try{const s=localStorage.getItem("token"),a=await fetch("http://localhost:5000/api/fees/".concat(e),{headers:{Authorization:"Bearer ".concat(s)}});if(a.ok){const e=await a.json();t(e)}}catch(s){console.error("Error fetching fee structure:",s)}},f=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("http://localhost:5000/api/payments/my-payments",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();r(e)}}catch(e){console.error("Error fetching payments:",e)}},y=()=>e,b=(e,t)=>{if(!e)return 0;const s=e.totalFee;return"semester"===t?s/2:s},v=e=>{switch(e){case"Paid":return"#28a745";case"Pending":return"#ffc107";case"Failed":return"#dc3545";default:return"#6c757d"}},S=y(),A=b(S,x);return(0,n.jsxs)("div",{className:"menu-content",children:[(0,n.jsx)("h1",{children:"My Fees"}),(0,n.jsx)("p",{children:"View your fee structure and payment history."}),d&&(0,n.jsx)("div",{style:{padding:"10px",margin:"10px 0",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:d.includes("Error")||d.includes("Failed")?"#ffebee":"#e8f5e8",color:d.includes("Error")||d.includes("Failed")?"#c62828":"#2e7d32"},children:d}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("button",{onClick:()=>m("fees"),style:{padding:"10px 20px",marginRight:"10px",backgroundColor:"fees"===u?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Fee Details"}),(0,n.jsx)("button",{onClick:()=>m("payments"),style:{padding:"10px 20px",backgroundColor:"payments"===u?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Payment History"})]}),"fees"===u&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Your Course Fee Structure"}),l&&S&&(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsxs)("h4",{children:["Course: ",l.department]}),(0,n.jsx)("div",{style:{overflowX:"auto",marginBottom:"20px"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{style:{backgroundColor:"#f8f9fa"},children:[(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Fee Head"}),(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"center"},children:"Amount (\u20b9/Year)"})]})}),(0,n.jsxs)("tbody",{children:[Object.entries(S.feeComponents).map(e=>{let[t,s]=e;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd",fontWeight:"tuitionFee"===t?"bold":"normal"},children:{tuitionFee:"Tuition Fee",libraryFee:"Library Fee",laboratoryFee:"Laboratory Fee",examinationFee:"Examination Fee",sportsFee:"Sports Fee",developmentFee:"Development Fee",miscellaneousFee:"Miscellaneous"}[t]}),(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"center"},children:0===s?"-":s.toLocaleString()})]},t)}),(0,n.jsxs)("tr",{style:{backgroundColor:"#e7f3ff"},children:[(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd",fontWeight:"bold"},children:"Total"}),(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"center",fontWeight:"bold"},children:S.totalFee.toLocaleString()})]})]})]})})]}),!S&&l&&(0,n.jsx)("div",{style:{marginBottom:"20px",padding:"20px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f8f9fa"},children:(0,n.jsxs)("p",{children:["No fee structure found for your course: ",l.department]})}),S&&(0,n.jsx)("div",{style:{marginBottom:"20px"},children:(0,n.jsxs)("div",{style:{border:"2px solid #007bff",borderRadius:"8px",padding:"20px",backgroundColor:"#e7f3ff",marginBottom:"20px"},children:[(0,n.jsxs)("p",{style:{fontSize:"18px",fontWeight:"bold",color:"#007bff"},children:["Total Annual Fee: \u20b9",S.totalFee]}),(0,n.jsxs)("p",{children:["Semester Fee: \u20b9",S.totalFee/2]})]})}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("h4",{children:"Submit Fee Payment"}),(0,n.jsxs)("div",{style:{display:"flex",gap:"15px",alignItems:"center",marginBottom:"15px"},children:[(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"radio",value:"semester",checked:"semester"===x,onChange:e=>p(e.target.value)}),"Pay for Semester (\u20b9",S?S.totalFee/2:0,")"]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"radio",value:"year",checked:"year"===x,onChange:e=>p(e.target.value)}),"Pay for Year (\u20b9",S?S.totalFee:0,")"]})]}),(0,n.jsx)("button",{onClick:async()=>{if(!l||!y())return void h("Unable to process payment. Student information or fee structure not found.");const e=y(),t=b(e,x);o(!0),h("");try{const e=localStorage.getItem("token"),s=await fetch("http://localhost:5000/api/payments/initiate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({course:l.department,year:l.year,semester:l.semester,paymentType:x,amount:t})}),a=await s.json();s.ok?(h("Payment initiated successfully! Please complete the payment process."),f()):h(a.message||"Failed to initiate payment")}catch(s){h("Error initiating payment: "+s.message)}finally{o(!1)}},disabled:c||!S,style:{padding:"12px 24px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:c||!S?"not-allowed":"pointer",fontSize:"16px"},children:c?"Processing...":"Submit Payment \u20b9".concat(A," for ").concat("semester"===x?"Semester":"Year")})]})]}),"payments"===u&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Payment History"}),(0,n.jsx)("div",{style:{maxHeight:"600px",overflowY:"auto"},children:s.length>0?(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{style:{backgroundColor:"#f8f9fa"},children:[(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Year"}),(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Semester"}),(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Type"}),(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Amount"}),(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Status"}),(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Date"})]})}),(0,n.jsx)("tbody",{children:s.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:e.year}),(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:e.semester}),(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:e.paymentType}),(0,n.jsxs)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:["\u20b9",e.amount]}),(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:(0,n.jsx)("span",{style:{padding:"3px 8px",borderRadius:"12px",backgroundColor:v(e.status),color:"white",fontSize:"12px"},children:e.status})}),(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:new Date(e.createdAt).toLocaleDateString()})]},e._id))})]}):(0,n.jsx)("p",{children:"No payment records found."})})]})]})}},5257:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(5043),n=s(9722),r=s(579);const l=()=>{const[e,t]=(0,a.useState)(null),[s,l]=(0,a.useState)(null),[i,c]=(0,a.useState)(!1),[o,d]=(0,a.useState)(""),[h,u]=(0,a.useState)(""),m=(0,a.useRef)(null);return(0,r.jsxs)("div",{className:"upload-photo-container",children:[(0,r.jsx)("h1",{children:"Upload Profile Photo"}),(0,r.jsx)("p",{children:"Upload and crop profile picture for ID card, attendance logs, and dashboard."}),h&&(0,r.jsx)("div",{className:"error-message",style:{color:"red",marginBottom:"10px"},children:h}),o&&(0,r.jsx)("div",{className:"success-message",style:{color:"green",marginBottom:"10px"},children:o}),(0,r.jsxs)("div",{className:"upload-section",children:[(0,r.jsx)("input",{type:"file",ref:m,onChange:e=>{const s=e.target.files[0];if(s){if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(s.type))return void u("Please select a valid image file (JPEG, PNG, GIF)");if(s.size>5242880)return void u("File size must be less than 5MB");t(s),u("");const e=new FileReader;e.onload=e=>l(e.target.result),e.readAsDataURL(s)}},accept:"image/*",style:{marginBottom:"10px"}}),s&&(0,r.jsxs)("div",{className:"preview-section",style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:"Preview:"}),(0,r.jsx)("img",{src:s,alt:"Profile Preview",style:{maxWidth:"200px",maxHeight:"200px",borderRadius:"50%",objectFit:"cover",border:"2px solid #ccc"}})]}),(0,r.jsxs)("div",{className:"upload-actions",children:[(0,r.jsx)("button",{onClick:async()=>{if(e){c(!0),u(""),d("");try{const s=localStorage.getItem("token"),a=new FormData;a.append("profilePicture",e);const r={headers:{Authorization:"Bearer ".concat(s),"Content-Type":"multipart/form-data"}};await n.A.post("http://localhost:5000/api/staff/profile-picture",a,r);d("Profile picture uploaded successfully!"),t(null),l(null),m.current&&(m.current.value=""),setTimeout(()=>{window.location.reload()},1500)}catch(h){var s,a;u((null===(s=h.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to upload profile picture")}finally{c(!1)}}else u("Please select a file first")},disabled:!e||i,style:{padding:"10px 20px",marginRight:"10px",backgroundColor:e&&!i?"#007bff":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:e&&!i?"pointer":"not-allowed"},children:i?"Uploading...":"Upload Photo"}),(0,r.jsx)("button",{onClick:()=>{t(null),l(null),u(""),d(""),m.current&&(m.current.value="")},disabled:i,style:{padding:"10px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:i?"not-allowed":"pointer"},children:"Cancel"})]})]}),(0,r.jsxs)("div",{className:"upload-info",style:{marginTop:"20px",fontSize:"14px",color:"#666"},children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Supported formats:"})," JPEG, PNG, GIF"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Maximum file size:"})," 5MB"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Recommended:"})," Square images (1:1 aspect ratio) for best results"]})]})]})}},5470:(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});var a=s(5043),n=s(184),r=s(579);var l=s(9722);const i=e=>{let{message:t,type:s="info",onClose:n,duration:l=5e3}=e;(0,a.useEffect)(()=>{if(l>0){const e=setTimeout(n,l);return()=>clearTimeout(e)}},[n,l]);return(0,r.jsxs)("div",{className:"alert ".concat((()=>{switch(s){case"success":return"alert-success";case"error":return"alert-error";case"warning":return"alert-warning";default:return"alert-info"}})()),children:[(0,r.jsx)("span",{children:t}),(0,r.jsx)("button",{className:"alert-close",onClick:n,children:"\xd7"})]})},c=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!1),[c,o]=(0,a.useState)(0),[d,h]=(0,a.useState)([]),[u,m]=(0,a.useState)(0),[x,p]=(0,a.useState)(0),[j,g]=(0,a.useState)({present:0,total:0}),[f,y]=(0,a.useState)(!0);(0,a.useEffect)(()=>{b();(async()=>{try{const e=localStorage.getItem("token"),t={headers:{Authorization:"Bearer ".concat(e)}},s=await l.A.get("/api/staff/assigned-classes",t);o(s.data.length||0);const a=(new Date).toLocaleDateString("en-US",{weekday:"long"}),n=await l.A.get("/api/staff/timetable?day=".concat(a),t);h(n.data);const r=(await l.A.get("/api/staff/work/assignments",t)).data.filter(e=>new Date(e.dueDate)<new Date(Date.now()+6048e5)).length;m(r);const i=(await l.A.get("/api/staff/messages/inbox",t)).data.filter(e=>!e.isRead).length;p(i);const c=(new Date).toISOString().slice(0,7),d=await l.A.get("/api/staff/attendance/monthly?month=".concat(c),t);if(d.data.summary&&d.data.summary.length>0){const e=d.data.summary.reduce((e,t)=>e+t.present,0),t=d.data.summary[0].total;g({present:e,total:t*d.data.summary.length})}y(!1)}catch(e){console.error("Error fetching dashboard data:",e),y(!1)}})()},[]);const b=async()=>{t([{_id:"1",message:"Staff meeting scheduled for tomorrow",type:"info"},{_id:"2",message:"New student enrollment deadline approaching",type:"warning"}])};return f?(0,r.jsx)("div",{className:"loading",children:"Loading dashboard..."}):(0,r.jsxs)("div",{className:"staff-dashboard",children:[(0,r.jsxs)("div",{className:"dashboard-header",children:[(0,r.jsx)("h1",{children:"Staff Dashboard"}),(0,r.jsxs)("div",{className:"alert-icon",onClick:()=>n(!s),children:["\ud83d\udd14",e.length>0&&(0,r.jsx)("span",{className:"alert-count",children:e.length})]})]}),s&&(0,r.jsx)("div",{className:"alerts-panel",children:0===e.length?(0,r.jsx)("p",{children:"No new alerts."}):e.map(s=>(0,r.jsx)(i,{message:s.message,type:s.type,onClose:()=>{return a=s._id,void t(e.filter(e=>e._id!==a));var a},duration:5e3},s._id))}),(0,r.jsxs)("div",{className:"dashboard-cards",children:[(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{children:"Assigned Classes"}),(0,r.jsx)("p",{children:c})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{children:"Today's Timetable"}),(0,r.jsxs)("ul",{children:[d.map((e,t)=>(0,r.jsxs)("li",{children:[e.period,": ",e.class," - ",e.subject," (",e.time,")"]},t)),0===d.length&&(0,r.jsx)("li",{children:"No classes today"})]})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{children:"Pending Assignments"}),(0,r.jsx)("p",{children:u})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{children:"Unread Messages"}),(0,r.jsx)("p",{children:x})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{children:"Attendance Summary (This Month)"}),(0,r.jsxs)("p",{children:["Present: ",j.present," / Total: ",j.total]}),(0,r.jsxs)("p",{children:["Percentage: ",j.total>0?Math.round(j.present/j.total*100):0,"%"]})]})]}),(0,r.jsxs)("div",{className:"recent-notices",children:[(0,r.jsx)("h3",{children:"Recent Notices"}),(0,r.jsx)("p",{children:"No recent notices available."})]})]})};var o=s(9379);const d=()=>{const[e,t]=(0,a.useState)({_id:"",name:"",designation:"",department:"",qualifications:"",joiningDate:"",email:"",phone:"",address:"",profilePicture:null}),[s,n]=(0,a.useState)(!0),[i,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{x()},[]);const x=async()=>{try{const e=localStorage.getItem("token"),s={headers:{Authorization:"Bearer ".concat(e)}},a=await l.A.get("http://localhost:5000/api/staff/profile",s);console.log("Profile data received:",a.data),console.log("Profile picture field:",a.data.profilePicture),t(a.data),n(!1)}catch(d){console.error("Error fetching profile:",d),h("Failed to fetch profile"),n(!1)}},p=s=>{t((0,o.A)((0,o.A)({},e),{},{[s.target.name]:s.target.value}))};return s?(0,r.jsx)("div",{children:"Loading profile..."}):(0,r.jsxs)("div",{className:"staff-profile",children:[(0,r.jsx)("h1",{children:"Staff Profile"}),d&&(0,r.jsx)("div",{className:"error",style:{color:"red",marginBottom:"10px"},children:d}),(0,r.jsxs)("div",{className:"profile-picture-section",style:{marginBottom:"20px",textAlign:"center"},children:[e.profilePicture?(0,r.jsx)("img",{src:"http://localhost:5000/uploads/profile-pictures/".concat(e.profilePicture),alt:"Profile",style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",border:"3px solid #007bff"},onError:e=>{console.error("Image failed to load:",e.target.src),e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,r.jsx)("div",{style:{width:"150px",height:"150px",borderRadius:"50%",backgroundColor:"#f0f0f0",display:e.profilePicture?"none":"flex",alignItems:"center",justifyContent:"center",border:"3px solid #ccc",margin:"0 auto"},children:(0,r.jsx)("span",{style:{fontSize:"48px",color:"#666"},children:"\ud83d\udc64"})}),(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsx)("a",{href:"/staff/upload-photo",style:{color:"#007bff",textDecoration:"none"},children:e.profilePicture?"Change Photo":"Upload Photo"})})]}),(0,r.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),m(!0),h("");try{const t=localStorage.getItem("token"),s={headers:{Authorization:"Bearer ".concat(t)}};await l.A.put("http://localhost:5000/api/staff/profile",e,s),c(!1),await x()}catch(d){h("Failed to update profile")}finally{m(!1)}},children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Staff ID:"}),(0,r.jsx)("input",{type:"text",name:"staffId",value:e.staffId||e._id,disabled:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Name:"}),(0,r.jsx)("input",{type:"text",name:"name",value:e.name,onChange:p,disabled:!i,required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Designation:"}),(0,r.jsx)("input",{type:"text",name:"designation",value:e.designation,onChange:p,disabled:!i,required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Department:"}),(0,r.jsx)("input",{type:"text",name:"department",value:e.department,onChange:p,disabled:!i,required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Qualifications:"}),(0,r.jsx)("textarea",{name:"qualifications",value:e.qualifications,onChange:p,disabled:!i})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Joining Date:"}),(0,r.jsx)("input",{type:"date",name:"joiningDate",value:(e=>{if(!e)return"";return new Date(e).toISOString().split("T")[0]})(e.joiningDate),onChange:p,disabled:!i,required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Email:"}),(0,r.jsx)("input",{type:"email",name:"email",value:e.email,onChange:p,disabled:!i,required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Phone:"}),(0,r.jsx)("input",{type:"tel",name:"phone",value:e.phone,onChange:p,disabled:!i})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Address:"}),(0,r.jsx)("textarea",{name:"address",value:e.address,onChange:p,disabled:!i})]}),(0,r.jsx)("button",{type:"button",onClick:()=>c(!i),children:i?"Cancel":"Edit Profile"}),i&&(0,r.jsx)("button",{type:"submit",children:"Save Changes"})]}),(0,r.jsx)("div",{className:"profile-actions",children:(0,r.jsx)("a",{href:"/staff/upload-photo",children:"Upload Photo"})})]})};var h=s(5257);const u=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)({class:"",subject:"",title:"",description:"",dueDate:""}),[i,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)("");(0,a.useEffect)(()=>{u()},[]);const u=async()=>{try{const e=localStorage.getItem("token"),s={headers:{Authorization:"Bearer ".concat(e)}},a=await l.A.get("/api/staff/assigned-classes",s);t(a.data.map(e=>e.class))}catch(e){console.error("Error fetching classes:",e)}},m=e=>{n((0,o.A)((0,o.A)({},s),{},{[e.target.name]:e.target.value}))};return(0,r.jsxs)("div",{className:"create-assignment",children:[(0,r.jsx)("h1",{children:"Create Assignment"}),(0,r.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0);try{const e=localStorage.getItem("token"),t={headers:{Authorization:"Bearer ".concat(e)}};await l.A.post("/api/staff/work/assign",s,t),h("Assignment created successfully"),n({class:"",subject:"",title:"",description:"",dueDate:""})}catch(t){h("Failed to create assignment")}c(!1)},children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Class:"}),(0,r.jsxs)("select",{name:"class",value:s.class,onChange:m,required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select Class"}),e.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Subject:"}),(0,r.jsxs)("select",{name:"subject",value:s.subject,onChange:m,required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select Subject"}),(0,r.jsx)("option",{value:"Math",children:"Math"}),(0,r.jsx)("option",{value:"Science",children:"Science"}),(0,r.jsx)("option",{value:"English",children:"English"})]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Title:"}),(0,r.jsx)("input",{type:"text",name:"title",value:s.title,onChange:m,required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Description:"}),(0,r.jsx)("textarea",{name:"description",value:s.description,onChange:m,required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Due Date:"}),(0,r.jsx)("input",{type:"date",name:"dueDate",value:s.dueDate,onChange:m,required:!0})]}),(0,r.jsx)("button",{type:"submit",disabled:i,children:"Create Assignment"})]}),d&&(0,r.jsx)("div",{className:"message",children:d})]})},m=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(null),[i,c]=(0,a.useState)([]),[o,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{h()},[]);const h=async()=>{try{const e=localStorage.getItem("token"),s={headers:{Authorization:"Bearer ".concat(e)}},a=await l.A.get("/api/staff/assignments",s);t(a.data)}catch(e){console.error("Error fetching assignments:",e)}},u=async e=>{d(!0);try{const t=localStorage.getItem("token"),s={headers:{Authorization:"Bearer ".concat(t)}},a=await l.A.get("/api/staff/assignments/".concat(e,"/submissions"),s);c(a.data),n(e)}catch(t){console.error("Error fetching submissions:",t)}d(!1)};return(0,r.jsxs)("div",{className:"view-assignments",children:[(0,r.jsx)("h1",{children:"View Assignments"}),(0,r.jsxs)("div",{className:"assignments-list",children:[(0,r.jsx)("h2",{children:"Your Assignments"}),e.map(e=>(0,r.jsxs)("div",{className:"assignment-item",children:[(0,r.jsxs)("h3",{children:[e.title," - ",e.class," (",e.subject,")"]}),(0,r.jsxs)("p",{children:["Due: ",new Date(e.dueDate).toLocaleDateString()]}),(0,r.jsx)("button",{onClick:()=>u(e._id),children:"View Submissions"})]},e._id))]}),s&&(0,r.jsxs)("div",{className:"submissions",children:[(0,r.jsx)("h2",{children:"Submissions"}),o?(0,r.jsx)("div",{children:"Loading..."}):(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Student"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"Submitted At"}),(0,r.jsx)("th",{children:"Grade"})]})}),(0,r.jsx)("tbody",{children:i.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.studentName}),(0,r.jsx)("td",{children:e.status}),(0,r.jsx)("td",{children:e.submittedAt?new Date(e.submittedAt).toLocaleDateString():"N/A"}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",value:e.grade,onChange:t=>(async(e,t)=>{try{const a=localStorage.getItem("token"),n={headers:{Authorization:"Bearer ".concat(a)}};await l.A.put("/api/staff/submissions/".concat(e,"/grade"),{grade:t},n),u(s)}catch(a){console.error("Error updating grade:",a)}})(e._id,t.target.value),placeholder:"Enter grade"})})]},e._id))})]})]})]})},x=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!1);(0,a.useEffect)(()=>{i()},[]);const i=async()=>{try{const e=localStorage.getItem("token"),s={headers:{Authorization:"Bearer ".concat(e)}},a=await l.A.get("/api/staff/circulars",s);t(a.data)}catch(e){console.error("Error fetching circulars:",e)}};return(0,r.jsxs)("div",{className:"circulars",children:[(0,r.jsx)("h1",{children:"Circulars / Notices"}),s?(0,r.jsx)("div",{children:"Loading..."}):(0,r.jsx)("ul",{children:e.map(e=>(0,r.jsxs)("li",{children:[(0,r.jsx)("h3",{children:e.title}),(0,r.jsx)("p",{children:e.description}),(0,r.jsx)("p",{children:(0,r.jsx)("small",{children:new Date(e.date).toLocaleDateString()})}),e.fileUrl&&(0,r.jsx)("button",{onClick:()=>((e,t)=>{const s=document.createElement("a");s.href=e,s.download=t,s.click()})(e.fileUrl,e.title),children:"Download"})]},e._id))})]})},p=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[i,c]=(0,a.useState)([]),[d,h]=(0,a.useState)([]),[u,m]=(0,a.useState)({}),[x,p]=(0,a.useState)({course:"",semester:"",subject:"",date:(new Date).toISOString().split("T")[0]}),[j,g]=(0,a.useState)(""),[f,y]=(0,a.useState)(!1),[b,v]=(0,a.useState)(!1),[S,A]=(0,a.useState)(""),[w,N]=(0,a.useState)("");(0,a.useEffect)(()=>{C()},[]),(0,a.useEffect)(()=>{x.course?k(x.course):(n([]),c([]),h([]))},[x.course]),(0,a.useEffect)(()=>{x.semester?D(x.course,x.semester):(c([]),h([]))},[x.course,x.semester]),(0,a.useEffect)(()=>{x.subject?P(x.course,x.semester,x.subject):h([])},[x.course,x.semester,x.subject]),(0,a.useEffect)(()=>{if(d.length>0){const e={};d.forEach(t=>{e[t.rollNo]={status:f?"Present":"Absent",remarks:""}}),m(e)}},[d,f]);const C=async()=>{try{console.log("Fetching courses...");const e=await l.A.get("/api/courses");console.log("Courses response:",e.data),t(e.data)}catch(e){console.error("Error fetching courses:",e),t([{id:1,name:"BA"},{id:2,name:"BSc"},{id:3,name:"B.Ed"}]),A("")}},k=async e=>{try{console.log("Fetching semesters for course:",e);const t=await l.A.get("/api/semesters?course=".concat(e));console.log("Semesters response:",t.data),n(t.data)}catch(t){console.error("Error fetching semesters:",t),n([{id:1,name:"Semester 1"},{id:2,name:"Semester 2"},{id:3,name:"Semester 3"}]),A("")}},D=async(e,t)=>{try{console.log("Fetching subjects for course:",e,"semester:",t);const s=await l.A.get("/api/subjects?course=".concat(e,"&semester=").concat(t));console.log("Subjects response:",s.data),c(s.data)}catch(s){console.error("Error fetching subjects:",s),c([{id:1,name:"Subject 1"},{id:2,name:"Subject 2"},{id:3,name:"Subject 3"}]),A("")}},P=async(e,t,s)=>{try{console.log("Fetching students for course:",e,"semester:",t,"subject:",s);const a=await l.A.get("/api/students?course=".concat(e,"&semester=").concat(t,"&subject=").concat(s));console.log("Students response:",a.data),h(a.data)}catch(a){console.error("Error fetching students:",a),h([{rollNo:"101",name:"Student A"},{rollNo:"102",name:"Student B"},{rollNo:"103",name:"Student C"}]),A("")}},E=e=>{const{name:t,value:s}=e.target;p(e=>(0,o.A)((0,o.A)({},e),{},{[t]:s}))},F=(e,t,s)=>{m(a=>(0,o.A)((0,o.A)({},a),{},{[e]:(0,o.A)((0,o.A)({},a[e]),{},{[t]:s})}))},_=d.filter(e=>e.name.toLowerCase().includes(j.toLowerCase())||e.rollNo.toLowerCase().includes(j.toLowerCase()));return(0,r.jsxs)("div",{className:"mark-attendance",children:[(0,r.jsx)("h1",{children:"Mark Student Attendance"}),S&&(0,r.jsx)("div",{className:"error",children:S}),w&&(0,r.jsx)("div",{className:"success",children:w}),(0,r.jsxs)("div",{className:"filter-panel",children:[(0,r.jsxs)("div",{className:"filter-group",children:[(0,r.jsx)("label",{htmlFor:"attendance-course-select",children:"Course"}),(0,r.jsxs)("select",{id:"attendance-course-select",name:"course",value:x.course,onChange:E,children:[(0,r.jsx)("option",{value:"",children:"Select Course"}),e.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"filter-group",children:[(0,r.jsx)("label",{htmlFor:"attendance-semester-select",children:"Semester"}),(0,r.jsxs)("select",{id:"attendance-semester-select",name:"semester",value:x.semester,onChange:E,disabled:!x.course,children:[(0,r.jsx)("option",{value:"",children:"Select Semester"}),s.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"filter-group",children:[(0,r.jsx)("label",{htmlFor:"attendance-subject-select",children:"Subject"}),(0,r.jsxs)("select",{id:"attendance-subject-select",name:"subject",value:x.subject,onChange:E,disabled:!x.semester,children:[(0,r.jsx)("option",{value:"",children:"Select Subject"}),i.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"filter-group",children:[(0,r.jsx)("label",{htmlFor:"attendance-date-select",children:"Date"}),(0,r.jsx)("input",{id:"attendance-date-select",type:"date",name:"date",value:x.date,onChange:E})]})]}),d.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"table-controls",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search by name or roll no",value:j,onChange:e=>g(e.target.value)}),(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:f,onChange:e=>y(e.target.checked)}),"Mark All Present"]})]}),(0,r.jsxs)("table",{className:"attendance-table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Roll No"}),(0,r.jsx)("th",{children:"Student Name"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"Remarks"})]})}),(0,r.jsx)("tbody",{children:_.map(e=>{var t,s;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.rollNo}),(0,r.jsx)("td",{children:e.name}),(0,r.jsx)("td",{children:(0,r.jsxs)("select",{value:(null===(t=u[e.rollNo])||void 0===t?void 0:t.status)||"Absent",onChange:t=>F(e.rollNo,"status",t.target.value),children:[(0,r.jsx)("option",{value:"Present",children:"Present"}),(0,r.jsx)("option",{value:"Absent",children:"Absent"}),(0,r.jsx)("option",{value:"Leave",children:"Leave"})]})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",value:(null===(s=u[e.rollNo])||void 0===s?void 0:s.remarks)||"",onChange:t=>F(e.rollNo,"remarks",t.target.value),placeholder:"Optional remarks"})})]},e.rollNo)})})]}),(0,r.jsx)("button",{onClick:async()=>{if(!x.course||!x.semester||!x.subject||!x.date)return void A("Please select all filters");if(0!==Object.keys(u).filter(e=>"Absent"!==u[e].status).length){v(!0),A(""),N("");try{const e={course:x.course,semester:x.semester,subject:x.subject,date:x.date,attendance:u};await l.A.post("/api/attendance",e),N("Attendance marked successfully")}catch(e){A("Failed to save attendance")}finally{v(!1)}}else A("Please mark attendance for at least one student")},disabled:b,children:b?"Submitting...":"Submit Attendance"})]})]})};var j=s(6396);s(4857);const g=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[i,c]=(0,a.useState)([]),[d,h]=(0,a.useState)({totalDays:0,present:0,absent:0,leave:0,percentage:0}),[u,m]=(0,a.useState)({course:"",semester:"",dateFrom:"",dateTo:"",student:""}),[x,p]=(0,a.useState)(!1),[g,f]=(0,a.useState)(""),[y,b]=(0,a.useState)("table");(0,a.useEffect)(()=>{v()},[]),(0,a.useEffect)(()=>{u.course?S(u.course):n([])},[u.course]),(0,a.useEffect)(()=>{u.course&&u.semester&&u.dateFrom&&u.dateTo?(async()=>{p(!0),f("");try{const e=new URLSearchParams({course:u.course,semester:u.semester,dateFrom:u.dateFrom,dateTo:u.dateTo,student:u.student}),t=await l.A.get("/api/attendance?".concat(e));c(t.data.records),h(t.data.summary)}catch(e){f("Failed to fetch attendance data")}finally{p(!1)}})():(c([]),h({totalDays:0,present:0,absent:0,leave:0,percentage:0}))},[u]);const v=async()=>{try{const e=await l.A.get("/api/courses");t(e.data)}catch(e){f("Failed to fetch courses")}},S=async e=>{try{const t=await l.A.get("/api/semesters?course=".concat(e));n(t.data)}catch(t){f("Failed to fetch semesters")}},A=e=>{const{name:t,value:s}=e.target;m(e=>(0,o.A)((0,o.A)({},e),{},{[t]:s}))};return(0,r.jsxs)("div",{className:"attendance-report",children:[(0,r.jsx)("h1",{children:"View Attendance Summary"}),g&&(0,r.jsx)("div",{className:"error",children:g}),(0,r.jsxs)("div",{className:"filter-panel",children:[(0,r.jsxs)("div",{className:"filter-group",children:[(0,r.jsx)("label",{htmlFor:"summary-course-select",children:"Course"}),(0,r.jsxs)("select",{id:"summary-course-select",name:"course",value:u.course,onChange:A,children:[(0,r.jsx)("option",{value:"",children:"Select Course"}),e.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"filter-group",children:[(0,r.jsx)("label",{htmlFor:"summary-semester-select",children:"Semester"}),(0,r.jsxs)("select",{id:"summary-semester-select",name:"semester",value:u.semester,onChange:A,disabled:!u.course,children:[(0,r.jsx)("option",{value:"",children:"Select Semester"}),s.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"filter-group",children:[(0,r.jsx)("label",{htmlFor:"summary-date-from",children:"Date From"}),(0,r.jsx)("input",{id:"summary-date-from",type:"date",name:"dateFrom",value:u.dateFrom,onChange:A})]}),(0,r.jsxs)("div",{className:"filter-group",children:[(0,r.jsx)("label",{htmlFor:"summary-date-to",children:"Date To"}),(0,r.jsx)("input",{id:"summary-date-to",type:"date",name:"dateTo",value:u.dateTo,onChange:A})]}),(0,r.jsxs)("div",{className:"filter-group",children:[(0,r.jsx)("label",{htmlFor:"summary-student-search",children:"Student Name/ID"}),(0,r.jsx)("input",{id:"summary-student-search",type:"text",name:"student",value:u.student,onChange:A,placeholder:"Optional"})]})]}),i.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"summary-section",children:[(0,r.jsx)("h2",{children:"Attendance Summary"}),(0,r.jsxs)("div",{className:"summary-stats",children:[(0,r.jsxs)("div",{children:["Total Working Days: ",d.totalDays]}),(0,r.jsxs)("div",{children:["Days Present: ",d.present]}),(0,r.jsxs)("div",{children:["Days Absent: ",d.absent]}),(0,r.jsxs)("div",{children:["Days on Leave: ",d.leave]}),(0,r.jsxs)("div",{style:{color:(w=d.percentage,w>=90?"green":w>=75?"orange":"red")},children:["Attendance %: ",d.percentage.toFixed(2),"%"]})]})]}),(0,r.jsxs)("div",{className:"view-toggle",children:[(0,r.jsx)("button",{onClick:()=>b("table"),className:"table"===y?"active":"",children:"Table View"}),(0,r.jsx)("button",{onClick:()=>b("chart"),className:"chart"===y?"active":"",children:"Chart View"})]}),"table"===y&&(0,r.jsxs)("table",{className:"attendance-table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Date"}),(0,r.jsx)("th",{children:"Subject"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"Remarks"})]})}),(0,r.jsx)("tbody",{children:i.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.date}),(0,r.jsx)("td",{children:e.subject||""}),(0,r.jsx)("td",{className:"status-".concat(e.status.toLowerCase()),children:e.status}),(0,r.jsx)("td",{children:e.remarks||""})]},t))})]}),"chart"===y&&(0,r.jsx)("div",{className:"chart-placeholder",children:(0,r.jsx)("p",{children:"Chart view not implemented yet. Placeholder for Chart.js integration."})}),(0,r.jsxs)("div",{className:"export-buttons",children:[(0,r.jsx)("button",{onClick:()=>{const e=new j.Ay;e.text("Attendance Report",20,10),e.autoTable({head:[["Date","Subject","Status","Remarks"]],body:i.map(e=>[e.date,e.subject||"",e.status,e.remarks||""])}),e.save("attendance-report.pdf")},children:"Export to PDF"}),(0,r.jsx)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,Date,Subject,Status,Remarks\n"+i.map(e=>"".concat(e.date,",").concat(e.subject||"",",").concat(e.status,",").concat(e.remarks||"")).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","attendance-report.csv"),document.body.appendChild(s),s.click()},children:"Export to CSV"})]})]}),x&&(0,r.jsx)("div",{className:"loading",children:"Loading..."})]});var w};var f=s(2823),y=s.n(f),b=(s(5884),s(9711)),v=s(1036);const S=()=>{const[e,t]=(0,a.useState)(""),[s,n]=(0,a.useState)(""),[l,i]=(0,a.useState)([]),[c,o]=(0,a.useState)([]),[d,h]=(0,a.useState)([]),[u,m]=(0,a.useState)([]),[x,p]=(0,a.useState)(null),[j,g]=(0,a.useState)(null),[f,S]=(0,a.useState)(null),[A,w]=(0,a.useState)([]),[N,C]=(0,a.useState)(!1);(0,a.useEffect)(()=>{k()},[]);const k=async()=>{i([{_id:"1",name:"Computer Science"},{_id:"2",name:"Mechanical Engineering"},{_id:"3",name:"Electrical Engineering"}].map(e=>({value:e._id,label:e.name})))},D=()=>{t(""),n(""),p(null),g(null),S(null),w([]),o([]),h([]),m([])};return(0,r.jsxs)("div",{className:"messaging",children:[(0,r.jsx)("h1",{children:"Messaging"}),(0,r.jsxs)("div",{className:"send-message",children:[(0,r.jsx)("input",{type:"text",placeholder:"Subject (max 100 chars)",value:e,onChange:e=>t(e.target.value.slice(0,100)),maxLength:"100",required:!0}),(0,r.jsx)(y(),{value:s,onChange:n,placeholder:"Message Body (max 5000 chars)",modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},formats:["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"]}),(0,r.jsxs)("div",{className:"filters",children:[(0,r.jsx)(b.Ay,{value:x,onChange:e=>{p(e),g(null),S(null),w([]),o([]),h([]),m([]),e&&(async()=>{o([{_id:"1",name:"Semester 1"},{_id:"2",name:"Semester 2"},{_id:"3",name:"Semester 3"}].map(e=>({value:e._id,label:e.name})))})(e.value)},options:l,placeholder:"Select Course",isClearable:!0}),(0,r.jsx)(b.Ay,{value:j,onChange:e=>{g(e),S(null),w([]),h([]),m([]),e&&(async()=>{h([{_id:"1",name:"Section A"},{_id:"2",name:"Section B"},{_id:"3",name:"Section C"}].map(e=>({value:e._id,label:e.name})))})(e.value)},options:c,placeholder:"Select Semester",isClearable:!0,isDisabled:!x}),(0,r.jsx)(b.Ay,{value:f,onChange:e=>{S(e),w([]),m([]),e&&(async()=>{m([{_id:"1",name:"John Doe"},{_id:"2",name:"Jane Smith"},{_id:"3",name:"Bob Johnson"},{_id:"4",name:"Alice Brown"}].map(e=>({value:e._id,label:e.name})))})(e.value)},options:d,placeholder:"Select Section",isClearable:!0,isDisabled:!j}),(0,r.jsx)(b.Ay,{value:A,onChange:e=>{w(e)},options:u,placeholder:"Select Students",isMulti:!0,isDisabled:!f})]}),(0,r.jsxs)("div",{className:"buttons",children:[(0,r.jsx)("button",{onClick:async()=>{e.trim()&&s.trim()&&0!==A.length?(C(!0),setTimeout(()=>{v.oR.success("Message sent successfully! (Mock)"),D(),C(!1)},1e3)):v.oR.error("Please fill all required fields and select at least one student.")},disabled:N||!e.trim()||!s.trim()||0===A.length,children:N?"Sending...":"Send"}),(0,r.jsx)("button",{onClick:D,disabled:N,children:"Reset"})]})]})]})},A=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(""),[i,c]=(0,a.useState)(null),[o,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{h()},[]);const h=async()=>{try{const e=localStorage.getItem("token"),s={headers:{Authorization:"Bearer ".concat(e)}},a=await l.A.get("/api/staff/students",s);t(a.data)}catch(e){console.error("Error fetching students:",e)}};return(0,r.jsxs)("div",{className:"report-card",children:[(0,r.jsx)("h1",{children:"Report Card"}),(0,r.jsxs)("div",{className:"select-student",children:[(0,r.jsxs)("select",{value:s,onChange:e=>n(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Select Student"}),e.map(e=>(0,r.jsxs)("option",{value:e._id,children:[e.name," - ",e.class]},e._id))]}),(0,r.jsx)("button",{onClick:async()=>{if(s){d(!0);try{const e=localStorage.getItem("token"),t={headers:{Authorization:"Bearer ".concat(e)}},a=await l.A.get("/api/staff/report-card/".concat(s),t);c(a.data)}catch(e){console.error("Error generating report card:",e)}d(!1)}},disabled:o||!s,children:"Generate Report"})]}),o?(0,r.jsx)("div",{children:"Loading..."}):i?(0,r.jsxs)("div",{className:"report-details",children:[(0,r.jsxs)("h2",{children:["Report for ",i.studentName]}),(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Subject"}),(0,r.jsx)("th",{children:"Grade"}),(0,r.jsx)("th",{children:"Attendance %"})]})}),(0,r.jsx)("tbody",{children:i.subjects.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.subject}),(0,r.jsx)("td",{children:e.grade}),(0,r.jsx)("td",{children:e.attendancePercentage})]},e.subject))})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Overall Grade:"})," ",i.overallGrade]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Overall Attendance:"})," ",i.overallAttendance,"%"]})]}):(0,r.jsx)("p",{children:"Select a student to generate report card."})]})},w=()=>{const[e,t]=(0,a.useState)({language:"English",notifications:!0,theme:"light"}),s=e=>{const{name:s,value:a,type:n,checked:r}=e.target;t(e=>(0,o.A)((0,o.A)({},e),{},{[s]:"checkbox"===n?r:a}))};return(0,r.jsxs)("div",{className:"settings",children:[(0,r.jsx)("h1",{children:"Settings"}),(0,r.jsxs)("div",{className:"preferences",children:[(0,r.jsx)("h2",{children:"Preferences"}),(0,r.jsxs)("label",{children:["Language:",(0,r.jsxs)("select",{name:"language",value:e.language,onChange:s,children:[(0,r.jsx)("option",{value:"English",children:"English"}),(0,r.jsx)("option",{value:"Hindi",children:"Hindi"})]})]}),(0,r.jsxs)("label",{children:["Notifications:",(0,r.jsx)("input",{type:"checkbox",name:"notifications",checked:e.notifications,onChange:s})]}),(0,r.jsxs)("label",{children:["Theme:",(0,r.jsxs)("select",{name:"theme",value:e.theme,onChange:s,children:[(0,r.jsx)("option",{value:"light",children:"Light"}),(0,r.jsx)("option",{value:"dark",children:"Dark"})]})]}),(0,r.jsx)("button",{onClick:()=>{localStorage.setItem("preferences",JSON.stringify(e)),alert("Preferences saved!")},children:"Save Preferences"})]}),(0,r.jsx)("div",{className:"logout",children:(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),window.location.href="/login"},children:"Logout"})})]})},N=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)({type:"sick",startDate:"",endDate:"",reason:""}),[i,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)("");(0,a.useEffect)(()=>{u()},[]);const u=async()=>{try{const e=localStorage.getItem("token"),s={headers:{Authorization:"Bearer ".concat(e)}},a=await l.A.get("/api/staff/leaves",s);t(a.data)}catch(e){console.error("Error fetching leaves:",e)}},m=e=>{n((0,o.A)((0,o.A)({},s),{},{[e.target.name]:e.target.value}))};return(0,r.jsxs)("div",{className:"leave-management",children:[(0,r.jsx)("h1",{children:"Leave Management"}),(0,r.jsxs)("div",{className:"apply-leave",children:[(0,r.jsx)("h2",{children:"Apply for Leave"}),(0,r.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0);try{const e=localStorage.getItem("token"),t={headers:{Authorization:"Bearer ".concat(e)}},a=new Date(s.startDate),r=new Date(s.endDate),i=Math.ceil((r-a)/864e5)+1;await l.A.post("/api/staff/leave/apply",(0,o.A)((0,o.A)({},s),{},{days:i}),t),h("Leave applied successfully"),n({type:"sick",startDate:"",endDate:"",reason:""}),u()}catch(t){h("Failed to apply leave")}c(!1)},children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Type:"}),(0,r.jsxs)("select",{name:"type",value:s.type,onChange:m,required:!0,children:[(0,r.jsx)("option",{value:"sick",children:"Sick"}),(0,r.jsx)("option",{value:"casual",children:"Casual"}),(0,r.jsx)("option",{value:"earned",children:"Earned"}),(0,r.jsx)("option",{value:"maternity",children:"Maternity"}),(0,r.jsx)("option",{value:"other",children:"Other"})]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Start Date:"}),(0,r.jsx)("input",{type:"date",name:"startDate",value:s.startDate,onChange:m,required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"End Date:"}),(0,r.jsx)("input",{type:"date",name:"endDate",value:s.endDate,onChange:m,required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Reason:"}),(0,r.jsx)("textarea",{name:"reason",value:s.reason,onChange:m,required:!0})]}),(0,r.jsx)("button",{type:"submit",disabled:i,children:"Apply Leave"})]}),d&&(0,r.jsx)("div",{className:"message",children:d})]}),(0,r.jsxs)("div",{className:"leave-history",children:[(0,r.jsx)("h2",{children:"Leave History"}),(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Type"}),(0,r.jsx)("th",{children:"Start Date"}),(0,r.jsx)("th",{children:"End Date"}),(0,r.jsx)("th",{children:"Days"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"Reason"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.type}),(0,r.jsx)("td",{children:new Date(e.startDate).toLocaleDateString()}),(0,r.jsx)("td",{children:new Date(e.endDate).toLocaleDateString()}),(0,r.jsx)("td",{children:e.days}),(0,r.jsx)("td",{children:e.status}),(0,r.jsx)("td",{children:e.reason})]},e._id))})]})]})]})},C=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)("Monday"),[i,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{o()},[s]);const o=async()=>{try{const e=localStorage.getItem("token"),a={headers:{Authorization:"Bearer ".concat(e)}},n=await l.A.get("/api/staff/timetable?day=".concat(s),a);t(n.data),c(!1)}catch(e){console.error("Error fetching timetable:",e),c(!1)}};return i?(0,r.jsx)("div",{children:"Loading timetable..."}):(0,r.jsxs)("div",{className:"timetable",children:[(0,r.jsx)("h1",{children:"Timetable"}),(0,r.jsxs)("div",{className:"day-selector",children:[(0,r.jsx)("label",{children:"Select Day:"}),(0,r.jsx)("select",{value:s,onChange:e=>n(e.target.value),children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{className:"timetable-view",children:[(0,r.jsxs)("h2",{children:[s,"'s Schedule"]}),e.length>0?(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Period"}),(0,r.jsx)("th",{children:"Class"}),(0,r.jsx)("th",{children:"Subject"}),(0,r.jsx)("th",{children:"Time"}),(0,r.jsx)("th",{children:"Room"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.period}),(0,r.jsx)("td",{children:e.class}),(0,r.jsx)("td",{children:e.subject}),(0,r.jsx)("td",{children:e.time}),(0,r.jsx)("td",{children:e.room||"N/A"})]},e._id))})]}):(0,r.jsxs)("p",{children:["No classes scheduled for ",s,"."]})]})]})},k=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)((new Date).toISOString().slice(0,7)),[i,c]=(0,a.useState)(!1),[o,d]=(0,a.useState)("");(0,a.useEffect)(()=>{h()},[s]);const h=async()=>{try{const e=localStorage.getItem("token"),a={headers:{Authorization:"Bearer ".concat(e)}},n=await l.A.get("/api/staff/payroll?month=".concat(s),a);t(n.data)}catch(e){console.error("Error fetching payroll:",e)}};return(0,r.jsxs)("div",{className:"payroll",children:[(0,r.jsx)("h1",{children:"Payroll"}),(0,r.jsxs)("div",{className:"month-selector",children:[(0,r.jsx)("label",{children:"Select Month:"}),(0,r.jsx)("input",{type:"month",value:s,onChange:e=>n(e.target.value)}),(0,r.jsx)("button",{onClick:async()=>{c(!0);try{const e=localStorage.getItem("token"),t={headers:{Authorization:"Bearer ".concat(e)}};await l.A.post("/api/staff/payroll/generate",{month:s},t),d("Payslip generated successfully"),h()}catch(e){d("Failed to generate payslip")}c(!1)},disabled:i,children:"Generate Payslip"})]}),o&&(0,r.jsx)("div",{className:"message",children:o}),(0,r.jsx)("div",{className:"payroll-details",children:e.length>0?e.map(e=>(0,r.jsxs)("div",{className:"payslip",children:[(0,r.jsxs)("h3",{children:["Payslip for ",e.month]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Base Salary:"})," \u20b9",e.baseSalary]}),(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Allowances:"})}),(0,r.jsx)("ul",{children:e.allowances.map((e,t)=>(0,r.jsxs)("li",{children:[e.type,": \u20b9",e.amount]},t))}),(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Deductions:"})}),(0,r.jsx)("ul",{children:e.deductions.map((e,t)=>(0,r.jsxs)("li",{children:[e.type,": \u20b9",e.amount]},t))}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Net Salary:"})," \u20b9",e.netSalary]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Status:"})," ",e.status]}),e.payslipUrl&&(0,r.jsx)("a",{href:e.payslipUrl,target:"_blank",rel:"noopener noreferrer",children:"Download Payslip"})]},e._id)):(0,r.jsx)("p",{children:"No payroll data for selected month."})})]})},D=[{class_id:"C101",class_name:"Physics 101",section:"A",academic_year:"2025"},{class_id:"C102",class_name:"Chemistry 101",section:"B",academic_year:"2025"},{class_id:"C103",class_name:"Mathematics 101",section:"A",academic_year:"2025"}],P={C101:[{subject_id:"S101",subject_name:"Mechanics",subject_code:"PHY101",subject_type:"Theory",semester:"5"},{subject_id:"S102",subject_name:"Physics Lab",subject_code:"PHY101L",subject_type:"Lab",semester:"5"}],C102:[{subject_id:"S201",subject_name:"Organic Chemistry",subject_code:"CHEM101",subject_type:"Theory",semester:"5"}],C103:[{subject_id:"S301",subject_name:"Calculus",subject_code:"MATH101",subject_type:"Theory",semester:"5"},{subject_id:"S302",subject_name:"Linear Algebra",subject_code:"MATH102",subject_type:"Theory",semester:"5"}]},E=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(null),[l,i]=(0,a.useState)([]),[c,o]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t(D)},[]);const d=e=>{n(e),i(P[e.class_id]||[]),o(!0)};return(0,r.jsxs)("div",{className:"assign-class",children:[(0,r.jsx)("h1",{children:"Assigned Classes"}),(0,r.jsxs)("table",{className:"classes-table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Class Name"}),(0,r.jsx)("th",{children:"Section"}),(0,r.jsx)("th",{children:"Academic Year"})]})}),(0,r.jsx)("tbody",{children:e.length>0?e.map(e=>(0,r.jsxs)("tr",{onClick:()=>d(e),tabIndex:"0",onKeyDown:t=>"Enter"===t.key&&d(e),children:[(0,r.jsx)("td",{children:e.class_name}),(0,r.jsx)("td",{children:e.section}),(0,r.jsx)("td",{children:e.academic_year})]},e.class_id)):(0,r.jsx)("tr",{className:"empty-state",children:(0,r.jsx)("td",{colSpan:"3",children:"No classes assigned yet"})})})]}),c&&s&&(0,r.jsxs)("div",{className:"subject-panel",children:[(0,r.jsxs)("h2",{children:["Subjects for ",s.class_name," - Section ",s.section]}),(0,r.jsxs)("table",{className:"subjects-table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Subject Name"}),(0,r.jsx)("th",{children:"Code"}),(0,r.jsx)("th",{children:"Type"}),(0,r.jsx)("th",{children:"Semester"})]})}),(0,r.jsx)("tbody",{children:l.length>0?l.map(e=>(0,r.jsxs)("tr",{className:"Theory"===e.subject_type?"theory-row":"lab-row",children:[(0,r.jsx)("td",{children:e.subject_name}),(0,r.jsx)("td",{children:e.subject_code}),(0,r.jsx)("td",{children:e.subject_type}),(0,r.jsx)("td",{children:e.semester})]},e.subject_id)):(0,r.jsx)("tr",{className:"empty-state",children:(0,r.jsx)("td",{colSpan:"4",children:"No subjects mapped to this class"})})})]}),(0,r.jsx)("button",{className:"close-btn",onClick:()=>{n(null),i([]),o(!1)},children:"Close"})]})]})};s(1627);const F=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!0),[l,i]=(0,a.useState)("");(0,a.useEffect)(()=>{c()},[]);const c=async()=>{try{const e=localStorage.getItem("token"),s=await fetch("/api/staff/documents/course",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){const e=await s.json();t(e.students),e.students.length>0&&i(e.students[0].course)}else alert("Failed to fetch documents")}catch(e){console.error("Fetch error:",e),alert("Failed to fetch documents")}finally{n(!1)}};return s?(0,r.jsx)("div",{children:"Loading documents..."}):(0,r.jsxs)("div",{className:"view-documents",children:[(0,r.jsxs)("h2",{children:["View Student Documents (",l,")"]}),e.map(e=>(0,r.jsxs)("div",{className:"student-documents",children:[(0,r.jsxs)("h3",{children:[e.studentName," (ID: ",e.studentId,") - Course: ",e.course]}),(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Document Type"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"Action"})]})}),(0,r.jsx)("tbody",{children:e.documents.map((t,s)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t.type}),(0,r.jsx)("td",{children:t.status}),(0,r.jsx)("td",{children:t.fileName?(0,r.jsx)("button",{onClick:()=>(async(e,t)=>{try{const s=localStorage.getItem("token"),a=await fetch("/api/staff/documents/download/".concat(e,"/").concat(encodeURIComponent(t)),{headers:{Authorization:"Bearer ".concat(s)}});if(a.ok){const e=await a.blob(),s=window.URL.createObjectURL(e),n=document.createElement("a");n.href=s,n.download=t,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(s),document.body.removeChild(n)}else alert("Download failed")}catch(s){console.error("Download error:",s),alert("Download failed")}})(e.studentId,t.type),children:"Download"}):(0,r.jsx)("span",{children:"Not Uploaded"})})]},s))})]})]},e.studentId))]})},_=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!0),[l,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{c()},[]);const c=async()=>{try{const e=localStorage.getItem("token");if(!e)return i("No authentication token found"),void n(!1);const s=await fetch("/api/staff/documents/course",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));const a=await s.json();t(a.students||[])}catch(e){i(e.message)}finally{n(!1)}};return s?(0,r.jsx)("div",{className:"verify-documents",children:(0,r.jsx)("p",{children:"Loading documents..."})}):l?(0,r.jsx)("div",{className:"verify-documents",children:(0,r.jsxs)("p",{children:["Error: ",l]})}):(0,r.jsxs)("div",{className:"verify-documents",children:[(0,r.jsx)("h2",{children:"Verify Student Documents"}),0===e.length?(0,r.jsx)("p",{children:"No documents pending verification."}):e.map(e=>(0,r.jsxs)("div",{className:"student-documents",children:[(0,r.jsxs)("h3",{children:[e.studentName," (ID: ",e.studentId,")"]}),(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Document Type"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"Actions"})]})}),(0,r.jsx)("tbody",{children:e.documents.map((s,a)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:s.type}),(0,r.jsx)("td",{children:s.status}),(0,r.jsxs)("td",{children:[s.fileName&&(0,r.jsx)("button",{onClick:()=>(async(e,t)=>{try{const s=localStorage.getItem("token"),a=await fetch("/api/staff/documents/download/".concat(e,"/").concat(encodeURIComponent(t)),{headers:{Authorization:"Bearer ".concat(s)}});if(!a.ok)throw new Error("HTTP error! status: ".concat(a.status));const n=await a.blob(),r=window.URL.createObjectURL(n),l=document.createElement("a");l.href=r,l.download="".concat(t.replace(/[^a-zA-Z0-9]/g,"_"),".pdf"),document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(r),document.body.removeChild(l)}catch(s){alert("Error downloading document: ".concat(s.message))}})(e.studentId,s.type),children:"View"}),"Pending"===s.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>(async(e,s)=>{try{const a=localStorage.getItem("token"),n=await fetch("/api/staff/documents/verify",{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({studentId:e,documentType:s,status:"Verified"})});if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));const r=await n.json();alert(r.message),t(t=>t.map(t=>t.studentId===e?(0,o.A)((0,o.A)({},t),{},{documents:t.documents.map(e=>e.type===s?(0,o.A)((0,o.A)({},e),{},{status:"Verified"}):e)}):t))}catch(a){alert("Error verifying document: ".concat(a.message))}})(e.studentId,s.type),children:"Verify"}),(0,r.jsx)("button",{onClick:()=>(async(e,s)=>{try{const a=localStorage.getItem("token"),n=await fetch("/api/staff/documents/verify",{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({studentId:e,documentType:s,status:"Rejected"})});if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));const r=await n.json();alert(r.message),t(t=>t.map(t=>t.studentId===e?(0,o.A)((0,o.A)({},t),{},{documents:t.documents.map(e=>e.type===s?(0,o.A)((0,o.A)({},e),{},{status:"Rejected"}):e)}):t))}catch(a){alert("Error rejecting document: ".concat(a.message))}})(e.studentId,s.type),children:"Reject"})]})]})]},a))})]})]},e.studentId))]})};s(3137),s(1741);var R=s(9073),T=s(3204);const I=()=>{const[e,t]=(0,a.useState)("Dashboard"),[l,i]=(0,a.useState)(null),[o,j]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{const e=localStorage.getItem("token");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));j(t.designation||"")}catch(t){console.error("Error parsing token:",t);try{const{auth:e}=await Promise.resolve().then(s.bind(s,5496)),t=await e.getCurrentUser();t.success&&j(t.data.designation||"")}catch(a){console.error("Error fetching user info:",a)}}})()},[]);const f=[{name:"Dashboard",sub:[]},{name:"Profile Management",sub:["Profile","Upload Photo","Contact Info"]},{name:"Class Assignment Management",sub:["Assign Class/Subject","View Assignments"]},{name:"Attendance Management",sub:["Attendance Entry","Attendance View","Daily/Monthly Reports"]},{name:"Leave Management",sub:["Apply for Leave","View Leave History"]},{name:"Messaging",sub:["Send/Receive Messages","Alerts"]},{name:"Timetable",sub:[]},{name:"Circular/Notices",sub:["View Notices","Download"]},{name:"Work Management",sub:["Assignments","Reports"]},{name:"Student Documents",sub:["View Documents","Verify Documents"]},{name:"Report Card",sub:[]},{name:"Payroll",sub:["View Salary","Payslip"]},{name:"Settings",sub:["Preferences","Logout"]}],y="Fees Administrator"===o?[...f.slice(0,9),{name:"Fees",sub:["Total Fee Collection Summary","Active/Pending/Overdue Fees","Detailed Transactions Report","Fee Structure Management","Receipt Management","Scholarship/Concession Monitoring","Refund/Adjustment Tracking","Alerts & Notifications","Audit Log","Export Reports","Role/Permission Management"]},...f.slice(9)]:f,b={Dashboard:c,Profile:d,"Upload Photo":h.default,"Assign Class/Subject":E,"View Assignments":m,"Attendance Entry":p,"Attendance View":g,"Daily/Monthly Reports":g,"Apply for Leave":N,"View Leave History":N,"Send/Receive Messages":S,Alerts:S,Timetable:C,"View Notices":x,Download:x,Assignments:u,Reports:m,"View Documents":F,"Verify Documents":_,"Total Fee Collection Summary":R.A,"Active/Pending/Overdue Fees":T.A,"Detailed Transactions Report":()=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Detailed Transactions Report"}),(0,r.jsx)("p",{children:"Sabhi students ke individual transactions: date, amount, mode (cash, card, online), payment status."}),(0,r.jsx)("p",{children:"Filters for courses, batches, payment dates, fee status."})]}),"Fee Structure Management":()=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Fee Structure Management"}),(0,r.jsx)("p",{children:"Create/update fee heads and amounts for every course/batch/semester/year."}),(0,r.jsx)("p",{children:"Change history log (kis admin/staff ne kya update kiya)."})]}),"Receipt Management":()=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Receipt Management"}),(0,r.jsx)("p",{children:"Generate, view, download, print receipts for all transactions."}),(0,r.jsx)("p",{children:"Re-issue or correct receipts (with approval system)."})]}),"Scholarship/Concession Monitoring":()=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Scholarship/Concession Monitoring"}),(0,r.jsx)("p",{children:"Kis student ko kya concession/scholarship mila, total concession amount ka summary."})]}),"Refund/Adjustment Tracking":()=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Refund/Adjustment Tracking"}),(0,r.jsx)("p",{children:"Kis cases me refund/adjustment hua, reason, approval status."})]}),"Alerts & Notifications":()=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Alerts & Notifications"}),(0,r.jsx)("p",{children:"Due fee reminders, overdue alerts, communication logs (SMS, Email)."})]}),"Audit Log":()=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Audit Log"}),(0,r.jsx)("p",{children:"All changes/actions performed in fee system\u2014complete activity trail."})]}),"Export Reports":()=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Export Reports"}),(0,r.jsx)("p",{children:"Download reports in PDF/Excel (collection, dues, batch-wise, etc.)."})]}),"Role/Permission Management":()=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Role/Permission Management"}),(0,r.jsx)("p",{children:"Kis staff/admin ko kya access hai\u2014user management panel."})]}),"Report Card":A,"View Salary":k,Payslip:k,Preferences:w,Logout:()=>{localStorage.removeItem("token"),window.location.href="/login"}};return(0,r.jsxs)("div",{className:"admin-panel",children:[(0,r.jsxs)("nav",{className:"side-nav",children:[(0,r.jsx)("h2",{children:"Staff Panel"}),(0,r.jsx)("ul",{className:"nav-menu",children:y.map(s=>(0,r.jsxs)("li",{className:s.sub.length>0&&l===s.name?"open":"",children:[(0,r.jsxs)("button",{className:0===s.sub.length&&e===s.name?"active":"",onClick:()=>(e=>{0===e.sub.length?(t(e.name),i(null)):i(t=>t===e.name?null:e.name)})(s),children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[0===s.sub.length?(0,r.jsx)(n.NfF,{}):(0,r.jsx)(n.M1W,{})," ",s.name]}),s.sub.length>0&&(0,r.jsx)("span",{className:"arrow ".concat(l===s.name?"rotated":""),children:"\u25bc"})]}),s.sub.length>0&&(0,r.jsx)("ul",{className:"sub-menu ".concat(l===s.name?"open":""),children:s.sub.map(s=>(0,r.jsx)("li",{children:(0,r.jsx)("button",{className:e===s?"active":"",onClick:()=>{t(s)},children:s})},s))})]},s.name))})]}),(0,r.jsx)("main",{className:"content",children:(()=>{const t=b[e];return"function"===typeof t&&"Logout"===t.name?(t(),(0,r.jsx)("div",{children:"Logging out..."})):t?(0,r.jsx)(t,{}):(0,r.jsx)(c,{})})()})]})}}}]);
//# sourceMappingURL=415.8a130dda.chunk.js.map