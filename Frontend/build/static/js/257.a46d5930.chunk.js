"use strict";(self.webpackChunkclg_web=self.webpackChunkclg_web||[]).push([[257],{5257:(e,s,l)=>{l.r(s),l.d(s,{default:()=>a});var o=l(5043),r=l(9722),t=l(579);const a=()=>{const[e,s]=(0,o.useState)(null),[l,a]=(0,o.useState)(null),[i,n]=(0,o.useState)(!1),[c,d]=(0,o.useState)(""),[p,u]=(0,o.useState)(""),m=(0,o.useRef)(null);return(0,t.jsxs)("div",{className:"upload-photo-container",children:[(0,t.jsx)("h1",{children:"Upload Profile Photo"}),(0,t.jsx)("p",{children:"Upload and crop profile picture for ID card, attendance logs, and dashboard."}),p&&(0,t.jsx)("div",{className:"error-message",style:{color:"red",marginBottom:"10px"},children:p}),c&&(0,t.jsx)("div",{className:"success-message",style:{color:"green",marginBottom:"10px"},children:c}),(0,t.jsxs)("div",{className:"upload-section",children:[(0,t.jsx)("input",{type:"file",ref:m,onChange:e=>{const l=e.target.files[0];if(l){if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(l.type))return void u("Please select a valid image file (JPEG, PNG, GIF)");if(l.size>5242880)return void u("File size must be less than 5MB");s(l),u("");const e=new FileReader;e.onload=e=>a(e.target.result),e.readAsDataURL(l)}},accept:"image/*",style:{marginBottom:"10px"}}),l&&(0,t.jsxs)("div",{className:"preview-section",style:{marginBottom:"20px"},children:[(0,t.jsx)("h3",{children:"Preview:"}),(0,t.jsx)("img",{src:l,alt:"Profile Preview",style:{maxWidth:"200px",maxHeight:"200px",borderRadius:"50%",objectFit:"cover",border:"2px solid #ccc"}})]}),(0,t.jsxs)("div",{className:"upload-actions",children:[(0,t.jsx)("button",{onClick:async()=>{if(e){n(!0),u(""),d("");try{const l=localStorage.getItem("token"),o=new FormData;o.append("profilePicture",e);const t={headers:{Authorization:"Bearer ".concat(l),"Content-Type":"multipart/form-data"}};await r.A.post("http://localhost:5000/api/staff/profile-picture",o,t);d("Profile picture uploaded successfully!"),s(null),a(null),m.current&&(m.current.value=""),setTimeout(()=>{window.location.reload()},1500)}catch(p){var l,o;u((null===(l=p.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message)||"Failed to upload profile picture")}finally{n(!1)}}else u("Please select a file first")},disabled:!e||i,style:{padding:"10px 20px",marginRight:"10px",backgroundColor:e&&!i?"#007bff":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:e&&!i?"pointer":"not-allowed"},children:i?"Uploading...":"Upload Photo"}),(0,t.jsx)("button",{onClick:()=>{s(null),a(null),u(""),d(""),m.current&&(m.current.value="")},disabled:i,style:{padding:"10px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:i?"not-allowed":"pointer"},children:"Cancel"})]})]}),(0,t.jsxs)("div",{className:"upload-info",style:{marginTop:"20px",fontSize:"14px",color:"#666"},children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Supported formats:"})," JPEG, PNG, GIF"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Maximum file size:"})," 5MB"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Recommended:"})," Square images (1:1 aspect ratio) for best results"]})]})]})}}}]);
//# sourceMappingURL=257.a46d5930.chunk.js.map