"use strict";(self.webpackChunkclg_web=self.webpackChunkclg_web||[]).push([[441],{2441:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var o=r(5043),s=r(9722),i=r(2816),n=r(579);const l=e=>{let{videoUrl:t}=e;return(0,n.jsx)("button",{onClick:()=>{window.open(t,"_blank")},style:{padding:"8px 16px",backgroundColor:"#ff0000",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",margin:"10px 0"},children:"Watch Tutorial Video"})},a=()=>{const[e,t]=(0,o.useState)(null),[r,a]=(0,o.useState)(null),[c,d]=(0,o.useState)(!1),[p,u]=(0,o.useState)(""),[h,g]=(0,o.useState)(""),f=(0,o.useRef)(null);return(0,n.jsxs)("div",{className:"upload-photo-container",children:[(0,n.jsx)("h1",{children:"Upload Profile Photo"}),(0,n.jsx)("p",{children:"Upload and crop profile picture for ID card, attendance logs, and dashboard."}),(0,n.jsx)(l,{videoUrl:"https://www.youtube.com/watch?v=placeholder-uploadphoto"}),h&&(0,n.jsx)("div",{className:"error-message",style:{color:"red",marginBottom:"10px"},children:h}),p&&(0,n.jsx)("div",{className:"success-message",style:{color:"green",marginBottom:"10px"},children:p}),(0,n.jsxs)("div",{className:"upload-section",children:[(0,n.jsx)("input",{type:"file",ref:f,onChange:e=>{const r=e.target.files[0];if(r){if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(r.type))return void g("Please select a valid image file (JPEG, PNG, GIF)");if(r.size>5242880)return void g("File size must be less than 5MB");t(r),g("");const e=new FileReader;e.onload=e=>a(e.target.result),e.readAsDataURL(r)}},accept:"image/*",style:{marginBottom:"10px"}}),r&&(0,n.jsxs)("div",{className:"preview-section",style:{marginBottom:"20px"},children:[(0,n.jsx)("h3",{children:"Preview:"}),(0,n.jsx)(i.A,{src:r,alt:"Profile Preview",width:200,height:200,style:{borderRadius:"50%",objectFit:"cover",border:"2px solid #ccc"}})]}),(0,n.jsxs)("div",{className:"upload-actions",children:[(0,n.jsx)("button",{onClick:async()=>{if(e){d(!0),g(""),u("");try{const r=localStorage.getItem("token"),o=new FormData;o.append("profilePicture",e);const i={headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"}};await s.A.post("http://localhost:5000/api/student/profile-picture",o,i);u("Profile picture uploaded successfully!"),t(null),a(null),f.current&&(f.current.value=""),setTimeout(()=>{window.location.reload()},1500)}catch(h){var r,o;g((null===(r=h.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.message)||"Failed to upload profile picture")}finally{d(!1)}}else g("Please select a file first")},disabled:!e||c,style:{padding:"10px 20px",marginRight:"10px",backgroundColor:e&&!c?"#007bff":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:e&&!c?"pointer":"not-allowed"},children:c?"Uploading...":"Upload Photo"}),(0,n.jsx)("button",{onClick:()=>{t(null),a(null),g(""),u(""),f.current&&(f.current.value="")},disabled:c,style:{padding:"10px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:c?"not-allowed":"pointer"},children:"Cancel"})]})]}),(0,n.jsxs)("div",{className:"upload-info",style:{marginTop:"20px",fontSize:"14px",color:"#666"},children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Supported formats:"})," JPEG, PNG, GIF"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Maximum file size:"})," 5MB"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Recommended:"})," Square images (1:1 aspect ratio) for best results"]})]})]})}},2816:(e,t,r)=>{r.d(t,{A:()=>a});var o=r(9379),s=r(3986),i=r(5043),n=r(579);const l=["src","srcSet","sizes","alt","width","height","webpSrc","webpSrcSet"],a=(0,i.memo)(e=>{let{src:t,srcSet:r,sizes:a,alt:c,width:d,height:p,webpSrc:u,webpSrcSet:h}=e,g=(0,s.A)(e,l);const[f,m]=(0,i.useState)(!1),[x,b]=(0,i.useState)(!1),w=(0,i.useRef)();(0,i.useEffect)(()=>{const e=new IntersectionObserver(t=>{let[r]=t;r.isIntersecting&&(b(!0),e.disconnect())},{threshold:.1});return w.current&&e.observe(w.current),()=>e.disconnect()},[]);(()=>{const e=document.createElement("canvas");e.width=1,e.height=1,e.toDataURL("image/webp").indexOf("data:image/webp")})();return(0,n.jsxs)("picture",{children:[x&&u&&(0,n.jsx)("source",{srcSet:h||u,type:"image/webp",sizes:a}),(0,n.jsx)("img",(0,o.A)({ref:w,src:x?t:void 0,srcSet:x?r:void 0,sizes:a,alt:c,width:d,height:p,onLoad:()=>{m(!0)},style:{opacity:f?1:.5,transition:"opacity 0.3s",willChange:"opacity"},loading:"lazy"},g))]})})},3986:(e,t,r)=>{function o(e,t){if(null==e)return{};var r,o,s=function(e,t){if(null==e)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;r[o]=e[o]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}r.d(t,{A:()=>o})}}]);
//# sourceMappingURL=441.62d9d2dc.chunk.js.map