"use strict";(self.webpackChunkclg_web_frontend=self.webpackChunkclg_web_frontend||[]).push([[380],{1627:()=>{},5496:(e,a,t)=>{t.d(a,{$I:()=>c,AP:()=>o,EC:()=>u,FH:()=>r,WG:()=>l,auth:()=>n,i$:()=>i,wo:()=>d,z9:()=>v});var s=t(9722);const r=s.A.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e});const n={login:async(e,a,t,r)=>{try{const n=await s.A.post("http://localhost:5000/api/auth/login",{email:e,password:a,captchaToken:t,role:r}),{token:c,user:d}=n.data;return localStorage.setItem("token",c),localStorage.setItem("role",d.role),localStorage.setItem("designation",d.designation||""),{success:!0,role:d.role}}catch(d){var n,c;return{success:!1,error:(null===(n=d.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)||"Login failed"}}},getCurrentUser:async()=>{try{return{success:!0,data:(await r.get("/auth/me")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to get user info"}}},getMyPayments:async()=>{try{return{success:!0,data:(await r.get("/payments/my-payments")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch your payments"}}}},c={getDesignations:async()=>{try{return{success:!0,data:(await r.get("/staff/designations")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch designations"}}},addDesignation:async e=>{try{return{success:!0,data:(await r.post("/staff/designations",{name:e})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add designation"}}},registerStaff:async e=>{try{return{success:!0,data:(await r.post("/users/staff/register",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to register staff"}}},getStaff:async()=>{try{return{success:!0,data:(await r.get("/staff")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch staff"}}}},d={addEnquiry:async e=>{try{return{success:!0,data:(await r.post("/enquiries",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add enquiry"}}},getEnquiries:async()=>{try{return{success:!0,data:(await r.get("/enquiries")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch enquiries"}}},updateEnquiry:async(e,a)=>{try{return{success:!0,data:(await r.put("/enquiries/".concat(e),a)).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to update enquiry"}}}},o={addWork:async e=>{try{return{success:!0,data:(await r.post("/works",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add work"}}},getWorks:async()=>{try{return{success:!0,data:(await r.get("/works")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch works"}}},addWorkReport:async e=>{try{return{success:!0,data:(await r.post("/work-reports",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add work report"}}}},u={getStaffList:async()=>{try{return{success:!0,data:(await r.get("/erp/staff/list")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch staff list"}}},getAttendance:async e=>{try{return{success:!0,data:(await r.get("/erp/staff/attendance",{params:{date:e}})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch attendance"}}},markAttendance:async(e,a)=>{try{return{success:!0,data:(await r.post("/erp/staff/attendance",{date:e,attendanceData:a})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to mark attendance"}}},getAttendanceRecords:async(e,a)=>{try{return{success:!0,data:(await r.get("/erp/staff/attendance/records",{params:{startDate:e,endDate:a}})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch attendance records"}}},getLeaveRequests:async()=>{try{return{success:!0,data:(await r.get("/erp/staff/leaves")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch leave requests"}}},updateLeaveStatus:async(e,a)=>{try{return{success:!0,data:(await r.put("/erp/staff/leave/".concat(e,"/status"),{status:a})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to update leave status"}}},getMonthlyAttendance:async(e,a)=>{try{return{success:!0,data:(await r.get("/erp/staff/attendance/monthly",{params:{month:e,year:a}})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch monthly attendance"}}}},i={addUser:async e=>{try{return{success:!0,data:(await r.post("/users",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add user"}}},getUsers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return{success:!0,data:(await r.get("/users",{params:e})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch users"}}},getUser:async(e,a)=>{try{return{success:!0,data:(await r.get("/users/".concat(e,"/").concat(a))).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch user"}}},editUser:async(e,a,t)=>{try{return{success:!0,data:(await r.put("/users/".concat(e,"/").concat(a),t)).data}}catch(c){var s,n;return{success:!1,error:(null===(s=c.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||"Failed to edit user"}}},deleteUser:async(e,a)=>{try{return{success:!0,data:(await r.delete("/users/".concat(e,"/").concat(a))).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to delete user"}}},resetPassword:async(e,a,t)=>{try{return{success:!0,data:(await r.put("/users/reset-password/".concat(e,"/").concat(a),{password:t})).data}}catch(c){var s,n;return{success:!1,error:(null===(s=c.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||"Failed to reset password"}}}},l={getMyPayments:async()=>{try{return{success:!0,data:(await r.get("/payments/my-payments")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch your payments"}}},searchStudent:async e=>{try{return{success:!0,data:(await r.get("/students/search",{params:{search:e}})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to search students"}}},getStudentFees:async e=>{try{return{success:!0,data:(await r.get("/payments/student/".concat(e))).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch student fees"}}},collectFee:async e=>{try{return{success:!0,data:(await r.post("/payments/initiate",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to collect fee"}}},generateReceipt:async e=>{try{return{success:!0,data:(await r.post("/receipts/generate",{paymentId:e})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to generate receipt"}}},getPaymentDetails:async e=>{try{return{success:!0,data:(await r.get("/payments/".concat(e))).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch payment details"}}},getStudentDetails:async(e,a)=>{try{return{success:!0,data:(await r.get("/users/".concat(e,"/").concat(a))).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch student details"}}},getStudentProfile:async(e,a)=>{try{return{success:!0,data:(await r.get("/student/profile/".concat(e,"/").concat(a))).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch student profile"}}},updateStudentProfile:async(e,a,t)=>{try{return{success:!0,data:(await r.put("/student/profile/".concat(e,"/").concat(a),t)).data}}catch(c){var s,n;return{success:!1,error:(null===(s=c.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||"Failed to update student profile"}}}},v={addExpense:async(e,a)=>{try{const t=new FormData;t.append("category",e.category),t.append("amount",e.amount),t.append("notes",e.notes||""),e.date&&t.append("date",e.date),a&&t.append("attachment",a);return{success:!0,data:(await r.post("/expenses",t,{headers:{"Content-Type":"multipart/form-data"}})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to add expense"}}},getExpenses:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return{success:!0,data:(await r.get("/expenses",{params:e})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch expenses"}}},getExpenseReport:async(e,a)=>{try{return{success:!0,data:(await r.get("/expenses/report",{params:{startDate:e,endDate:a}})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to generate expense report"}}},updateExpense:async(e,a,t)=>{try{const s=new FormData;a.category&&s.append("category",a.category),a.amount&&s.append("amount",a.amount),void 0!==a.notes&&s.append("notes",a.notes),a.date&&s.append("date",a.date),t&&s.append("attachment",t);return{success:!0,data:(await r.put("/expenses/".concat(e),s,{headers:{"Content-Type":"multipart/form-data"}})).data}}catch(c){var s,n;return{success:!1,error:(null===(s=c.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||"Failed to update expense"}}},deleteExpense:async e=>{try{return{success:!0,data:(await r.delete("/expenses/".concat(e))).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to delete expense"}}}}},7265:(e,a,t)=>{t.d(a,{A:()=>r});t(5043);var s=t(579);const r=e=>{let{fees:a}=e;const t=a.reduce((e,a)=>e+a.amount,0),r=a.reduce((e,a)=>e+a.paid,0),n=a.reduce((e,a)=>e+a.balance,0);return(0,s.jsxs)("div",{className:"fee-summary-table",children:[(0,s.jsx)("h3",{children:"Fee Summary"}),(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Fee Head"}),(0,s.jsx)("th",{children:"Total Amount"}),(0,s.jsx)("th",{children:"Paid"}),(0,s.jsx)("th",{children:"Balance"})]})}),(0,s.jsxs)("tbody",{children:[a.map((e,a)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.head}),(0,s.jsxs)("td",{children:["\u20b9",e.amount.toLocaleString()]}),(0,s.jsxs)("td",{children:["\u20b9",e.paid.toLocaleString()]}),(0,s.jsxs)("td",{className:e.balance>0?"balance-due":"paid",children:["\u20b9",e.balance.toLocaleString()]})]},a)),(0,s.jsxs)("tr",{className:"total-row",children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:"Total"})}),(0,s.jsx)("td",{children:(0,s.jsxs)("strong",{children:["\u20b9",t.toLocaleString()]})}),(0,s.jsx)("td",{children:(0,s.jsxs)("strong",{children:["\u20b9",r.toLocaleString()]})}),(0,s.jsx)("td",{className:n>0?"balance-due":"paid",children:(0,s.jsxs)("strong",{children:["\u20b9",n.toLocaleString()]})})]})]})]})]})}}}]);
//# sourceMappingURL=380.14ce5630.chunk.js.map