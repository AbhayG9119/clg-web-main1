"use strict";(self.webpackChunkclg_web=self.webpackChunkclg_web||[]).push([[895],{2850:()=>{},5496:(e,a,t)=>{t.d(a,{$I:()=>c,AP:()=>o,EC:()=>i,WG:()=>u,auth:()=>n,wo:()=>d});var s=t(9722);const r=s.A.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e});const n={login:async(e,a,t,r)=>{try{const n=await s.A.post("http://localhost:5000/api/auth/login",{email:e,password:a,captchaToken:t,role:r}),{token:c,user:d}=n.data;return localStorage.setItem("token",c),localStorage.setItem("role",d.role),localStorage.setItem("designation",d.designation||""),{success:!0,role:d.role}}catch(d){var n,c;return{success:!1,error:(null===(n=d.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)||"Login failed"}}},getCurrentUser:async()=>{try{return{success:!0,data:(await r.get("/auth/me")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to get user info"}}}},c={getDesignations:async()=>{try{return{success:!0,data:(await r.get("/staff/designations")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch designations"}}},addDesignation:async e=>{try{return{success:!0,data:(await r.post("/staff/designations",{name:e})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add designation"}}},registerStaff:async e=>{try{return{success:!0,data:(await r.post("/users/staff/register",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to register staff"}}},getStaff:async()=>{try{return{success:!0,data:(await r.get("/staff")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch staff"}}}},d={addEnquiry:async e=>{try{return{success:!0,data:(await r.post("/enquiries",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add enquiry"}}},getEnquiries:async()=>{try{return{success:!0,data:(await r.get("/enquiries")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch enquiries"}}},updateEnquiry:async(e,a)=>{try{return{success:!0,data:(await r.put("/enquiries/".concat(e),a)).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to update enquiry"}}}},o={addWork:async e=>{try{return{success:!0,data:(await r.post("/works",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add work"}}},getWorks:async()=>{try{return{success:!0,data:(await r.get("/works")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch works"}}},addWorkReport:async e=>{try{return{success:!0,data:(await r.post("/work-reports",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add work report"}}}},i={getStaffList:async()=>{try{return{success:!0,data:(await r.get("/erp/staff/list")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch staff list"}}},getAttendance:async e=>{try{return{success:!0,data:(await r.get("/erp/staff/attendance",{params:{date:e}})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch attendance"}}},markAttendance:async(e,a)=>{try{return{success:!0,data:(await r.post("/erp/staff/attendance",{date:e,attendanceData:a})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to mark attendance"}}},getAttendanceRecords:async(e,a)=>{try{return{success:!0,data:(await r.get("/erp/staff/attendance/records",{params:{startDate:e,endDate:a}})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch attendance records"}}},getLeaveRequests:async()=>{try{return{success:!0,data:(await r.get("/erp/staff/leaves")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch leave requests"}}},updateLeaveStatus:async(e,a)=>{try{return{success:!0,data:(await r.put("/erp/staff/leave/".concat(e,"/status"),{status:a})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to update leave status"}}},getMonthlyAttendance:async(e,a)=>{try{return{success:!0,data:(await r.get("/erp/staff/attendance/monthly",{params:{month:e,year:a}})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch monthly attendance"}}}},u={searchStudent:async e=>{try{return{success:!0,data:(await r.get("/users",{params:{search:e,role:"student"}})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to search students"}}},getStudentFees:async e=>{try{return{success:!0,data:(await r.get("/payments/student/".concat(e))).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch student fees"}}},collectFee:async e=>{try{return{success:!0,data:(await r.post("/payments/initiate",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to collect fee"}}},generateReceipt:async e=>{try{return{success:!0,data:(await r.post("/receipts/generate",{paymentId:e})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to generate receipt"}}},getPaymentDetails:async e=>{try{return{success:!0,data:(await r.get("/payments/".concat(e))).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch payment details"}}},getStudentDetails:async(e,a)=>{try{return{success:!0,data:(await r.get("/users/".concat(e,"/").concat(a))).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch student details"}}}}},8895:(e,a,t)=>{t.r(a),t.d(a,{default:()=>i});var s=t(5043),r=t(3216),n=t(5475),c=t(5496),d=t(722),o=(t(2850),t(579));const i=()=>{const[e,a]=(0,s.useState)(""),[t,i]=(0,s.useState)(""),[u,l]=(0,s.useState)(""),[v,g]=(0,s.useState)(!1),[p,h]=(0,s.useState)(null),y=(0,r.Zp)();return(0,o.jsxs)("div",{className:"admin-login-container",children:[(0,o.jsx)("h2",{children:"Admin Login"}),(0,o.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),l(""),g(!0);try{const a=await c.auth.login(e,t,p,"admin");a.success?y("/admin/dashboard"):l(a.error)}catch(n){var s,r;l((null===(s=n.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"Login failed"),h(null)}g(!1)},children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Email:"}),(0,o.jsx)("input",{type:"email",value:e,onChange:e=>a(e.target.value),required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Password:"}),(0,o.jsx)("input",{type:"password",value:t,onChange:e=>i(e.target.value),required:!0})]}),(0,o.jsx)("div",{className:"form-group",children:(0,o.jsx)(d.A,{sitekey:"6LcLptQrAAAAAHdtlrO3jVvYFwFUE_ixdSKWkzaP",onChange:e=>h(e)})}),(0,o.jsx)("button",{type:"submit",disabled:v||!p,children:v?"Logging in...":"Login"}),u&&(0,o.jsx)("p",{style:{color:"red"},children:u})]}),(0,o.jsxs)("p",{children:["Student? ",(0,o.jsx)(n.N_,{to:"/login",children:"Student Login"})]}),(0,o.jsxs)("p",{children:["Staff? ",(0,o.jsx)(n.N_,{to:"/staff/login",children:"Staff Login"})]}),(0,o.jsxs)("p",{children:["Don't have an account? ",(0,o.jsx)(n.N_,{to:"/signup",children:"Sign Up"})]})]})}}}]);
//# sourceMappingURL=895.18d1cca5.chunk.js.map