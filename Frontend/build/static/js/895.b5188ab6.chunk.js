"use strict";(self.webpackChunkclg_web_frontend=self.webpackChunkclg_web_frontend||[]).push([[895],{2850:()=>{},5496:(e,a,t)=>{t.d(a,{$I:()=>d,AP:()=>o,EC:()=>u,FH:()=>r,WG:()=>l,auth:()=>n,i$:()=>i,wo:()=>c,z9:()=>v});var s=t(9722);const r=s.A.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e});const n={login:async(e,a,t,r)=>{try{const n=await s.A.post("http://localhost:5000/api/auth/login",{email:e,password:a,captchaToken:t,role:r}),{token:d,user:c}=n.data;return localStorage.setItem("token",d),localStorage.setItem("role",c.role),localStorage.setItem("designation",c.designation||""),{success:!0,role:c.role}}catch(c){var n,d;return{success:!1,error:(null===(n=c.response)||void 0===n||null===(d=n.data)||void 0===d?void 0:d.message)||"Login failed"}}},getCurrentUser:async()=>{try{return{success:!0,data:(await r.get("/auth/me")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to get user info"}}},getMyPayments:async()=>{try{return{success:!0,data:(await r.get("/payments/my-payments")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch your payments"}}}},d={getDesignations:async()=>{try{return{success:!0,data:(await r.get("/staff/designations")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch designations"}}},addDesignation:async e=>{try{return{success:!0,data:(await r.post("/staff/designations",{name:e})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add designation"}}},registerStaff:async e=>{try{return{success:!0,data:(await r.post("/users/staff/register",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to register staff"}}},getStaff:async()=>{try{return{success:!0,data:(await r.get("/staff")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch staff"}}}},c={addEnquiry:async e=>{try{return{success:!0,data:(await r.post("/enquiries",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add enquiry"}}},getEnquiries:async()=>{try{return{success:!0,data:(await r.get("/enquiries")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch enquiries"}}},updateEnquiry:async(e,a)=>{try{return{success:!0,data:(await r.put("/enquiries/".concat(e),a)).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to update enquiry"}}}},o={addWork:async e=>{try{return{success:!0,data:(await r.post("/works",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add work"}}},getWorks:async()=>{try{return{success:!0,data:(await r.get("/works")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch works"}}},addWorkReport:async e=>{try{return{success:!0,data:(await r.post("/work-reports",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add work report"}}}},u={getStaffList:async()=>{try{return{success:!0,data:(await r.get("/erp/staff/list")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch staff list"}}},getAttendance:async e=>{try{return{success:!0,data:(await r.get("/erp/staff/attendance",{params:{date:e}})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch attendance"}}},markAttendance:async(e,a)=>{try{return{success:!0,data:(await r.post("/erp/staff/attendance",{date:e,attendanceData:a})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to mark attendance"}}},getAttendanceRecords:async(e,a)=>{try{return{success:!0,data:(await r.get("/erp/staff/attendance/records",{params:{startDate:e,endDate:a}})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch attendance records"}}},getLeaveRequests:async()=>{try{return{success:!0,data:(await r.get("/erp/staff/leaves")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch leave requests"}}},updateLeaveStatus:async(e,a)=>{try{return{success:!0,data:(await r.put("/erp/staff/leave/".concat(e,"/status"),{status:a})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to update leave status"}}},getMonthlyAttendance:async(e,a)=>{try{return{success:!0,data:(await r.get("/erp/staff/attendance/monthly",{params:{month:e,year:a}})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch monthly attendance"}}}},i={addUser:async e=>{try{return{success:!0,data:(await r.post("/users",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add user"}}},getUsers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return{success:!0,data:(await r.get("/users",{params:e})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch users"}}},getUser:async(e,a)=>{try{return{success:!0,data:(await r.get("/users/".concat(e,"/").concat(a))).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch user"}}},editUser:async(e,a,t)=>{try{return{success:!0,data:(await r.put("/users/".concat(e,"/").concat(a),t)).data}}catch(d){var s,n;return{success:!1,error:(null===(s=d.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||"Failed to edit user"}}},deleteUser:async(e,a)=>{try{return{success:!0,data:(await r.delete("/users/".concat(e,"/").concat(a))).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to delete user"}}},resetPassword:async(e,a,t)=>{try{return{success:!0,data:(await r.put("/users/reset-password/".concat(e,"/").concat(a),{password:t})).data}}catch(d){var s,n;return{success:!1,error:(null===(s=d.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||"Failed to reset password"}}}},l={getMyPayments:async()=>{try{return{success:!0,data:(await r.get("/payments/my-payments")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch your payments"}}},searchStudent:async e=>{try{return{success:!0,data:(await r.get("/students/search",{params:{search:e}})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to search students"}}},getStudentFees:async e=>{try{return{success:!0,data:(await r.get("/payments/student/".concat(e))).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch student fees"}}},collectFee:async e=>{try{return{success:!0,data:(await r.post("/payments/initiate",e)).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to collect fee"}}},generateReceipt:async e=>{try{return{success:!0,data:(await r.post("/receipts/generate",{paymentId:e})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to generate receipt"}}},getPaymentDetails:async e=>{try{return{success:!0,data:(await r.get("/payments/".concat(e))).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch payment details"}}},getStudentDetails:async(e,a)=>{try{return{success:!0,data:(await r.get("/users/".concat(e,"/").concat(a))).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch student details"}}},getStudentProfile:async(e,a)=>{try{return{success:!0,data:(await r.get("/student/profile/".concat(e,"/").concat(a))).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch student profile"}}},updateStudentProfile:async(e,a,t)=>{try{return{success:!0,data:(await r.put("/student/profile/".concat(e,"/").concat(a),t)).data}}catch(d){var s,n;return{success:!1,error:(null===(s=d.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||"Failed to update student profile"}}}},v={addExpense:async(e,a)=>{try{const t=new FormData;t.append("category",e.category),t.append("amount",e.amount),t.append("notes",e.notes||""),e.date&&t.append("date",e.date),a&&t.append("attachment",a);return{success:!0,data:(await r.post("/expenses",t,{headers:{"Content-Type":"multipart/form-data"}})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to add expense"}}},getExpenses:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return{success:!0,data:(await r.get("/expenses",{params:e})).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch expenses"}}},getExpenseReport:async(e,a)=>{try{return{success:!0,data:(await r.get("/expenses/report",{params:{startDate:e,endDate:a}})).data}}catch(n){var t,s;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to generate expense report"}}},updateExpense:async(e,a,t)=>{try{const s=new FormData;a.category&&s.append("category",a.category),a.amount&&s.append("amount",a.amount),void 0!==a.notes&&s.append("notes",a.notes),a.date&&s.append("date",a.date),t&&s.append("attachment",t);return{success:!0,data:(await r.put("/expenses/".concat(e),s,{headers:{"Content-Type":"multipart/form-data"}})).data}}catch(d){var s,n;return{success:!1,error:(null===(s=d.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||"Failed to update expense"}}},deleteExpense:async e=>{try{return{success:!0,data:(await r.delete("/expenses/".concat(e))).data}}catch(s){var a,t;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to delete expense"}}}}},8895:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var s=t(5043),r=t(3216),n=t(5475),d=t(5496),c=t(722),o=(t(2850),t(579));const u=()=>{const[e,a]=(0,s.useState)(""),[t,u]=(0,s.useState)(""),[i,l]=(0,s.useState)(""),[v,p]=(0,s.useState)(!1),[g,y]=(0,s.useState)(null),h=(0,r.Zp)();return(0,o.jsxs)("div",{className:"admin-login-container",children:[(0,o.jsx)("h2",{children:"Admin Login"}),(0,o.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),l(""),p(!0);try{const a=await d.auth.login(e,t,g,"admin");a.success?h("/admin/dashboard"):l(a.error)}catch(n){var s,r;l((null===(s=n.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"Login failed"),y(null)}p(!1)},children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Email:"}),(0,o.jsx)("input",{type:"email",value:e,onChange:e=>a(e.target.value),required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Password:"}),(0,o.jsx)("input",{type:"password",value:t,onChange:e=>u(e.target.value),required:!0})]}),(0,o.jsx)("div",{className:"form-group",children:(0,o.jsx)(c.A,{sitekey:"6LcLptQrAAAAAHdtlrO3jVvYFwFUE_ixdSKWkzaP",onChange:e=>y(e)})}),(0,o.jsx)("button",{type:"submit",disabled:v||!g,children:v?"Logging in...":"Login"}),i&&(0,o.jsx)("p",{style:{color:"red"},children:i})]}),(0,o.jsxs)("p",{children:["Student? ",(0,o.jsx)(n.N_,{to:"/login",children:"Student Login"})]}),(0,o.jsxs)("p",{children:["Staff? ",(0,o.jsx)(n.N_,{to:"/staff/login",children:"Staff Login"})]}),(0,o.jsxs)("p",{children:["Don't have an account? ",(0,o.jsx)(n.N_,{to:"/signup",children:"Sign Up"})]})]})}}}]);
//# sourceMappingURL=895.b5188ab6.chunk.js.map