"use strict";(self.webpackChunkclg_web=self.webpackChunkclg_web||[]).push([[359,441],{1627:()=>{},2441:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(5043),n=s(9722),i=s(2816),r=s(579);const d=e=>{let{videoUrl:t}=e;return(0,r.jsx)("button",{onClick:()=>{window.open(t,"_blank")},style:{padding:"8px 16px",backgroundColor:"#ff0000",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",margin:"10px 0"},children:"Watch Tutorial Video"})},l=()=>{const[e,t]=(0,a.useState)(null),[s,l]=(0,a.useState)(null),[o,c]=(0,a.useState)(!1),[h,p]=(0,a.useState)(""),[x,u]=(0,a.useState)(""),m=(0,a.useRef)(null);return(0,r.jsxs)("div",{className:"upload-photo-container",children:[(0,r.jsx)("h1",{children:"Upload Profile Photo"}),(0,r.jsx)("p",{children:"Upload and crop profile picture for ID card, attendance logs, and dashboard."}),(0,r.jsx)(d,{videoUrl:"https://www.youtube.com/watch?v=placeholder-uploadphoto"}),x&&(0,r.jsx)("div",{className:"error-message",style:{color:"red",marginBottom:"10px"},children:x}),h&&(0,r.jsx)("div",{className:"success-message",style:{color:"green",marginBottom:"10px"},children:h}),(0,r.jsxs)("div",{className:"upload-section",children:[(0,r.jsx)("input",{type:"file",ref:m,onChange:e=>{const s=e.target.files[0];if(s){if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(s.type))return void u("Please select a valid image file (JPEG, PNG, GIF)");if(s.size>5242880)return void u("File size must be less than 5MB");t(s),u("");const e=new FileReader;e.onload=e=>l(e.target.result),e.readAsDataURL(s)}},accept:"image/*",style:{marginBottom:"10px"}}),s&&(0,r.jsxs)("div",{className:"preview-section",style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:"Preview:"}),(0,r.jsx)(i.A,{src:s,alt:"Profile Preview",width:200,height:200,style:{borderRadius:"50%",objectFit:"cover",border:"2px solid #ccc"}})]}),(0,r.jsxs)("div",{className:"upload-actions",children:[(0,r.jsx)("button",{onClick:async()=>{if(e){c(!0),u(""),p("");try{const s=localStorage.getItem("token"),a=new FormData;a.append("profilePicture",e);const i={headers:{Authorization:"Bearer ".concat(s),"Content-Type":"multipart/form-data"}};await n.A.post("http://localhost:5000/api/student/profile-picture",a,i);p("Profile picture uploaded successfully!"),t(null),l(null),m.current&&(m.current.value=""),setTimeout(()=>{window.location.reload()},1500)}catch(x){var s,a;u((null===(s=x.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to upload profile picture")}finally{c(!1)}}else u("Please select a file first")},disabled:!e||o,style:{padding:"10px 20px",marginRight:"10px",backgroundColor:e&&!o?"#007bff":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:e&&!o?"pointer":"not-allowed"},children:o?"Uploading...":"Upload Photo"}),(0,r.jsx)("button",{onClick:()=>{t(null),l(null),u(""),p(""),m.current&&(m.current.value="")},disabled:o,style:{padding:"10px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:o?"not-allowed":"pointer"},children:"Cancel"})]})]}),(0,r.jsxs)("div",{className:"upload-info",style:{marginTop:"20px",fontSize:"14px",color:"#666"},children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Supported formats:"})," JPEG, PNG, GIF"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Maximum file size:"})," 5MB"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Recommended:"})," Square images (1:1 aspect ratio) for best results"]})]})]})}},2816:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(9379),n=s(3986),i=s(5043),r=s(579);const d=["src","srcSet","sizes","alt","width","height","webpSrc","webpSrcSet"],l=(0,i.memo)(e=>{let{src:t,srcSet:s,sizes:l,alt:o,width:c,height:h,webpSrc:p,webpSrcSet:x}=e,u=(0,n.A)(e,d);const[m,g]=(0,i.useState)(!1),[j,y]=(0,i.useState)(!1),f=(0,i.useRef)();(0,i.useEffect)(()=>{const e=new IntersectionObserver(t=>{let[s]=t;s.isIntersecting&&(y(!0),e.disconnect())},{threshold:.1});return f.current&&e.observe(f.current),()=>e.disconnect()},[]);(()=>{const e=document.createElement("canvas");e.width=1,e.height=1,e.toDataURL("image/webp").indexOf("data:image/webp")})();return(0,r.jsxs)("picture",{children:[j&&p&&(0,r.jsx)("source",{srcSet:x||p,type:"image/webp",sizes:l}),(0,r.jsx)("img",(0,a.A)({ref:f,src:j?t:void 0,srcSet:j?s:void 0,sizes:l,alt:o,width:c,height:h,onLoad:()=>{g(!0)},style:{opacity:m?1:.5,transition:"opacity 0.3s",willChange:"opacity"},loading:"lazy"},u))]})})},3137:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(5043),n=s(579);const i=()=>{const[e,t]=(0,a.useState)(null),[s,i]=(0,a.useState)([]),[r,d]=(0,a.useState)(null),[l,o]=(0,a.useState)(!1),[c,h]=(0,a.useState)(""),[p,x]=(0,a.useState)("fees"),[u,m]=(0,a.useState)("semester");(0,a.useEffect)(()=>{g(),y()},[]),(0,a.useEffect)(()=>{null!==r&&void 0!==r&&r.department&&j(r.department)},[r]);const g=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("http://localhost:5000/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();d(e)}}catch(e){console.error("Error fetching student info:",e)}},j=async e=>{try{const s=localStorage.getItem("token"),a=await fetch("http://localhost:5000/api/fees/".concat(e),{headers:{Authorization:"Bearer ".concat(s)}});if(a.ok){const e=await a.json();t(e)}}catch(s){console.error("Error fetching fee structure:",s)}},y=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("http://localhost:5000/api/payments/my-payments",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();i(e)}}catch(e){console.error("Error fetching payments:",e)}},f=()=>e,b=(e,t)=>{if(!e)return 0;const s=e.totalFee;return"semester"===t?s/2:s},v=e=>{switch(e){case"Paid":return"#28a745";case"Pending":return"#ffc107";case"Failed":return"#dc3545";default:return"#6c757d"}},w=f(),S=b(w,u);return(0,n.jsxs)("div",{className:"menu-content",children:[(0,n.jsx)("h1",{children:"My Fees"}),(0,n.jsx)("p",{children:"View your fee structure and payment history."}),c&&(0,n.jsx)("div",{style:{padding:"10px",margin:"10px 0",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:c.includes("Error")||c.includes("Failed")?"#ffebee":"#e8f5e8",color:c.includes("Error")||c.includes("Failed")?"#c62828":"#2e7d32"},children:c}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("button",{onClick:()=>x("fees"),style:{padding:"10px 20px",marginRight:"10px",backgroundColor:"fees"===p?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Fee Details"}),(0,n.jsx)("button",{onClick:()=>x("payments"),style:{padding:"10px 20px",backgroundColor:"payments"===p?"#007bff":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Payment History"})]}),"fees"===p&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Your Course Fee Structure"}),r&&w&&(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsxs)("h4",{children:["Course: ",r.department]}),(0,n.jsx)("div",{style:{overflowX:"auto",marginBottom:"20px"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{style:{backgroundColor:"#f8f9fa"},children:[(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Fee Head"}),(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"center"},children:"Amount (\u20b9/Year)"})]})}),(0,n.jsxs)("tbody",{children:[Object.entries(w.feeComponents).map(e=>{let[t,s]=e;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd",fontWeight:"tuitionFee"===t?"bold":"normal"},children:{tuitionFee:"Tuition Fee",libraryFee:"Library Fee",laboratoryFee:"Laboratory Fee",examinationFee:"Examination Fee",sportsFee:"Sports Fee",developmentFee:"Development Fee",miscellaneousFee:"Miscellaneous"}[t]}),(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"center"},children:0===s?"-":s.toLocaleString()})]},t)}),(0,n.jsxs)("tr",{style:{backgroundColor:"#e7f3ff"},children:[(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd",fontWeight:"bold"},children:"Total"}),(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"center",fontWeight:"bold"},children:w.totalFee.toLocaleString()})]})]})]})})]}),!w&&r&&(0,n.jsx)("div",{style:{marginBottom:"20px",padding:"20px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f8f9fa"},children:(0,n.jsxs)("p",{children:["No fee structure found for your course: ",r.department]})}),w&&(0,n.jsx)("div",{style:{marginBottom:"20px"},children:(0,n.jsxs)("div",{style:{border:"2px solid #007bff",borderRadius:"8px",padding:"20px",backgroundColor:"#e7f3ff",marginBottom:"20px"},children:[(0,n.jsxs)("p",{style:{fontSize:"18px",fontWeight:"bold",color:"#007bff"},children:["Total Annual Fee: \u20b9",w.totalFee]}),(0,n.jsxs)("p",{children:["Semester Fee: \u20b9",w.totalFee/2]})]})}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("h4",{children:"Submit Fee Payment"}),(0,n.jsxs)("div",{style:{display:"flex",gap:"15px",alignItems:"center",marginBottom:"15px"},children:[(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"radio",value:"semester",checked:"semester"===u,onChange:e=>m(e.target.value)}),"Pay for Semester (\u20b9",w?w.totalFee/2:0,")"]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"radio",value:"year",checked:"year"===u,onChange:e=>m(e.target.value)}),"Pay for Year (\u20b9",w?w.totalFee:0,")"]})]}),(0,n.jsx)("button",{onClick:async()=>{if(!r||!f())return void h("Unable to process payment. Student information or fee structure not found.");const e=f(),t=b(e,u);o(!0),h("");try{const e=localStorage.getItem("token"),s=await fetch("http://localhost:5000/api/payments/initiate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({course:r.department,year:r.year,semester:r.semester,paymentType:u,amount:t})}),a=await s.json();s.ok?(h("Payment initiated successfully! Please complete the payment process."),y()):h(a.message||"Failed to initiate payment")}catch(s){h("Error initiating payment: "+s.message)}finally{o(!1)}},disabled:l||!w,style:{padding:"12px 24px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:l||!w?"not-allowed":"pointer",fontSize:"16px"},children:l?"Processing...":"Submit Payment \u20b9".concat(S," for ").concat("semester"===u?"Semester":"Year")})]})]}),"payments"===p&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Payment History"}),(0,n.jsx)("div",{style:{maxHeight:"600px",overflowY:"auto"},children:s.length>0?(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{style:{backgroundColor:"#f8f9fa"},children:[(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Year"}),(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Semester"}),(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Type"}),(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Amount"}),(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Status"}),(0,n.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Date"})]})}),(0,n.jsx)("tbody",{children:s.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:e.year}),(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:e.semester}),(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:e.paymentType}),(0,n.jsxs)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:["\u20b9",e.amount]}),(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:(0,n.jsx)("span",{style:{padding:"3px 8px",borderRadius:"12px",backgroundColor:v(e.status),color:"white",fontSize:"12px"},children:e.status})}),(0,n.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:new Date(e.createdAt).toLocaleDateString()})]},e._id))})]}):(0,n.jsx)("p",{children:"No payment records found."})})]})]})}},3986:(e,t,s)=>{function a(e,t){if(null==e)return{};var s,a,n=function(e,t){if(null==e)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],-1===t.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}s.d(t,{A:()=>a})},5359:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var a=s(5043),n=s(184),i=s(579);const r=e=>{let{message:t,type:s="info",onClose:n,duration:r=5e3}=e;(0,a.useEffect)(()=>{if(r>0){const e=setTimeout(n,r);return()=>clearTimeout(e)}},[onEffect,r]);return(0,i.jsxs)("div",{className:"alert ".concat((()=>{switch(s){case"success":return"alert-success";case"error":return"alert-error";case"warning":return"alert-warning";default:return"alert-info"}})()),children:[(0,i.jsx)("span",{children:t}),(0,i.jsx)("button",{className:"alert-close",onClick:n,children:"\xd7"})]})},d=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!1);(0,a.useEffect)(()=>{d()},[]);const d=async()=>{t([{_id:"1",message:"New assignment posted in Math class",type:"info"},{_id:"2",message:"Exam scheduled for next week",type:"warning"}])};return(0,i.jsxs)("div",{className:"menu-content",children:[(0,i.jsxs)("div",{className:"dashboard-header",children:[(0,i.jsx)("h1",{children:"Student Dashboard"}),(0,i.jsxs)("div",{className:"alert-icon",onClick:()=>n(!s),children:["\ud83d\udd14",e.length>0&&(0,i.jsx)("span",{className:"alert-count",children:e.length})]})]}),(0,i.jsx)("p",{children:"Welcome to your daily snapshot! Here's an overview of your academic activities."}),s&&(0,i.jsx)("div",{className:"alerts-panel",children:0===e.length?(0,i.jsx)("p",{children:"No new alerts."}):e.map(s=>(0,i.jsx)(r,{message:s.message,type:s.type,onClose:()=>{return a=s._id,void t(e.filter(e=>e._id!==a));var a},duration:5e3},s._id))}),(0,i.jsxs)("div",{className:"stats-grid",children:[(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("h3",{children:"Today's Timetable"}),(0,i.jsxs)("p",{children:["Math: 9:00 AM - 10:00 AM",(0,i.jsx)("br",{}),"Science: 10:30 AM - 11:30 AM"]})]}),(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("h3",{children:"Pending Assignments"}),(0,i.jsx)("p",{children:"3 assignments due this week"})]}),(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("h3",{children:"Notices"}),(0,i.jsx)("p",{children:"2 new notices from school"})]}),(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("h3",{children:"Attendance Summary"}),(0,i.jsx)("p",{children:"95% this month"})]}),(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("h3",{children:"Upcoming Exams"}),(0,i.jsx)("p",{children:"Math Exam on 15th Oct"})]}),(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("h3",{children:"Fee Due"}),(0,i.jsx)("p",{children:"\u20b9500 pending"})]})]})]})};var l=s(9379);const o=()=>{const[e,t]=(0,a.useState)(!1),[s,n]=(0,a.useState)(!0),[r,d]=(0,a.useState)(!1),[o,c]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[x,u]=(0,a.useState)({name:"",department:"",year:"",semester:"",mobileNumber:"",email:"",profilePhoto:""});(0,a.useEffect)(()=>{m()},[]);const m=async()=>{try{const e=localStorage.getItem("token");if(!e)return c("No authentication token found"),void n(!1);const t=await fetch("http://localhost:5000/api/student/profile",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch profile");const s=await t.json();u(s)}catch(o){console.error("Error fetching profile:",o),c("Failed to load profile data")}finally{n(!1)}},g=e=>{u((0,l.A)((0,l.A)({},x),{},{[e.target.name]:e.target.value}))};return s?(0,i.jsxs)("div",{className:"menu-content",children:[(0,i.jsx)("h1",{children:"Student Profile"}),(0,i.jsx)("p",{children:"Loading profile..."})]}):(0,i.jsxs)("div",{className:"menu-content",children:[(0,i.jsx)("h1",{children:"Student Profile"}),o&&(0,i.jsx)("div",{className:"error-message",style:{color:"red",marginBottom:"10px"},children:o}),h&&(0,i.jsx)("div",{className:"success-message",style:{color:"green",marginBottom:"10px"},children:h}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{children:"View Profile"}),(0,i.jsxs)("div",{style:{textAlign:"center",marginBottom:"20px"},children:[x.profilePhoto?(0,i.jsx)("img",{src:"http://localhost:5000/uploads/profile-pictures/".concat(x.profilePhoto),alt:"Profile",style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",border:"3px solid #007bff"},onError:e=>{console.error("Image failed to load:",e.target.src),e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,i.jsx)("div",{style:{width:"150px",height:"150px",borderRadius:"50%",backgroundColor:"#f0f0f0",display:x.profilePhoto?"none":"flex",alignItems:"center",justifyContent:"center",border:"3px solid #ccc",margin:"0 auto"},children:(0,i.jsx)("span",{style:{fontSize:"48px",color:"#666"},children:"\ud83d\udc64"})}),(0,i.jsx)("div",{style:{marginTop:"10px"},children:(0,i.jsx)("a",{href:"/student/upload-photo",style:{color:"#007bff",textDecoration:"none"},children:x.profilePhoto?"Change Photo":"Upload Photo"})})]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Name:"})," ",e?(0,i.jsx)("input",{name:"name",value:x.name||"",onChange:g}):x.name]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Department:"})," ",x.department]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Year:"})," ",x.year]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Semester:"})," ",x.semester]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Phone:"})," ",e?(0,i.jsx)("input",{name:"mobileNumber",value:x.mobileNumber||"",onChange:g}):x.mobileNumber]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Email:"})," ",x.email]}),(0,i.jsx)("button",{className:"btn",onClick:e?async()=>{d(!0),c(""),p("");try{const e=localStorage.getItem("token");if(!e)return c("No authentication token found"),void d(!1);const s=await fetch("http://localhost:5000/api/student/profile",{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({name:x.name,mobileNumber:x.mobileNumber})});if(!s.ok)throw new Error("Failed to update profile");const a=await s.json();u(a.student),p("Profile updated successfully!"),t(!1)}catch(o){console.error("Error updating profile:",o),c("Failed to update profile")}finally{d(!1)}}:()=>{t(!e),c(""),p("")},disabled:r,children:r?"Saving...":e?"Save":"Edit Profile"})]})]})},c=()=>(0,i.jsxs)("div",{className:"menu-content",children:[(0,i.jsx)("h1",{children:"Detailed Profile"}),(0,i.jsx)("p",{children:"This is a detailed view of the student's profile information. Here you can find comprehensive details about the student's academic and personal information."}),(0,i.jsxs)("div",{style:{marginTop:"20px"},children:[(0,i.jsx)("h2",{children:"Academic Information"}),(0,i.jsxs)("div",{style:{backgroundColor:"#f9f9f9",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Enrollment Number:"})," [Static Data]"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Course:"})," [Static Data]"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Branch:"})," [Static Data]"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Current Semester:"})," [Static Data]"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Academic Year:"})," [Static Data]"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"CGPA:"})," [Static Data]"]})]}),(0,i.jsx)("h2",{children:"Personal Information"}),(0,i.jsxs)("div",{style:{backgroundColor:"#f9f9f9",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Date of Birth:"})," [Static Data]"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Gender:"})," [Static Data]"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Nationality:"})," [Static Data]"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Blood Group:"})," [Static Data]"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Emergency Contact:"})," [Static Data]"]})]}),(0,i.jsx)("h2",{children:"Contact Information"}),(0,i.jsxs)("div",{style:{backgroundColor:"#f9f9f9",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Permanent Address:"})," [Static Data]"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Current Address:"})," [Static Data]"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Phone Number:"})," [Static Data]"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Alternate Phone:"})," [Static Data]"]})]}),(0,i.jsx)("h2",{children:"Additional Details"}),(0,i.jsxs)("div",{style:{backgroundColor:"#f9f9f9",padding:"15px",borderRadius:"8px"},children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Hobbies:"})," [Static Data]"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Skills:"})," [Static Data]"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Achievements:"})," [Static Data]"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Extracurricular Activities:"})," [Static Data]"]})]})]})]});var h=s(2441);const p=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(""),[r,d]=(0,a.useState)({start:"",end:""}),[o,c]=(0,a.useState)(""),[h,p]=(0,a.useState)(null),[x,u]=(0,a.useState)(!1),[m,g]=(0,a.useState)(1);(0,a.useEffect)(()=>{t([{id:1,title:"Math Homework",description:"Solve problems 1-10",subject:"Mathematics",deadline:"2023-10-15",fileUrl:"https://example.com/math.pdf",instructions:"Submit in PDF format"},{id:2,title:"Science Project",description:"Build a model",subject:"Science",deadline:"2023-10-20",fileUrl:null,instructions:"Include photos"},{id:3,title:"History Essay",description:"Write about ancient civilizations",subject:"History",deadline:"2023-09-30",fileUrl:"https://example.com/history.pdf",instructions:"Minimum 1000 words"}])},[]);const j=e.filter(e=>{const t=""===s||e.subject===s,a=(!r.start||new Date(e.deadline)>=new Date(r.start))&&(!r.end||new Date(e.deadline)<=new Date(r.end)),n=e.title.toLowerCase().includes(o.toLowerCase())||e.description.toLowerCase().includes(o.toLowerCase());return t&&a&&n}),y=j.slice(5*(m-1),5*m),f=Math.ceil(j.length/5),b=e=>{e&&alert("Download File: "+e)},v=[...new Set(e.map(e=>e.subject))];return(0,i.jsxs)("div",{className:"menu-content",children:[(0,i.jsx)("h1",{children:"View Assignments"}),(0,i.jsxs)("div",{className:"filter-bar",children:[(0,i.jsxs)("select",{value:s,onChange:e=>n(e.target.value),children:[(0,i.jsx)("option",{value:"",children:"All Subjects"}),v.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]}),(0,i.jsx)("input",{type:"date",value:r.start,onChange:e=>d((0,l.A)((0,l.A)({},r),{},{start:e.target.value})),placeholder:"Start Date"}),(0,i.jsx)("input",{type:"date",value:r.end,onChange:e=>d((0,l.A)((0,l.A)({},r),{},{end:e.target.value})),placeholder:"End Date"}),(0,i.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"Search assignments..."})]}),(0,i.jsx)("div",{className:"assignment-list",children:0===y.length?(0,i.jsx)("p",{children:"No assignments found"}):y.map(e=>{return(0,i.jsxs)("div",{className:"assignment-card",onClick:()=>(e=>{p(e),u(!0)})(e),children:[(0,i.jsx)("h3",{children:e.title}),(0,i.jsx)("p",{children:e.description}),(0,i.jsxs)("p",{children:["Deadline: ",e.deadline]}),(t=e.deadline,new Date(t)<new Date&&(0,i.jsx)("span",{className:"badge overdue",children:"Overdue"})),(0,i.jsx)("button",{className:"btn",onClick:t=>{t.stopPropagation(),b(e.fileUrl)},disabled:!e.fileUrl,children:"Download File"})]},e.id);var t})}),f>1&&(0,i.jsxs)("div",{className:"pagination",children:[(0,i.jsx)("button",{onClick:()=>g(e=>Math.max(e-1,1)),disabled:1===m,children:"Previous"}),(0,i.jsxs)("span",{children:["Page ",m," of ",f]}),(0,i.jsx)("button",{onClick:()=>g(e=>Math.min(e+1,f)),disabled:m===f,children:"Next"})]}),x&&h&&(0,i.jsx)("div",{className:"modal-overlay",onClick:()=>u(!1),children:(0,i.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("h2",{children:h.title}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Description:"})," ",h.description]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Deadline:"})," ",h.deadline]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Instructions:"})," ",h.instructions]}),(0,i.jsx)("button",{className:"btn",onClick:()=>b(h.fileUrl),disabled:!h.fileUrl,children:"Download File"}),(0,i.jsx)("button",{className:"btn close-btn",onClick:()=>u(!1),children:"Close"})]})})]})},x=()=>{const[e,t]=(0,a.useState)(""),[s,n]=(0,a.useState)(null),[r,d]=(0,a.useState)(""),[l,o]=(0,a.useState)("Pending"),[c,h]=(0,a.useState)(null),[p,x]=(0,a.useState)(""),u=[{id:1,title:"Math Homework",deadline:"2023-10-15"},{id:2,title:"Science Project",deadline:"2023-10-20"},{id:3,title:"History Essay",deadline:"2023-09-30"}];(0,a.useEffect)(()=>{o("Pending")},[]);const m=u.find(t=>t.id.toString()===e),g=!s||!e;return(0,i.jsxs)("div",{className:"menu-content",children:[(0,i.jsx)("h1",{children:"Submit Assignment"}),(0,i.jsxs)("div",{className:"assignment-selector",children:[(0,i.jsxs)("select",{value:e,onChange:e=>t(e.target.value),children:[(0,i.jsx)("option",{value:"",children:"Select Assignment"}),u.map(e=>(0,i.jsx)("option",{value:e.id,children:e.title},e.id))]}),m&&(0,i.jsxs)("p",{children:["Deadline: ",m.deadline]})]}),(0,i.jsxs)("div",{className:"upload-section",children:[(0,i.jsx)("input",{type:"file",onChange:e=>{const t=e.target.files[0];if(t){const e=10485760;if(!["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(t.type))return x("Only PDF or DOCX files allowed"),void n(null);if(t.size>e)return x("File size must be less than 10MB"),void n(null);n(t),x("")}},accept:".pdf,.docx"}),(0,i.jsx)("textarea",{value:r,onChange:e=>d(e.target.value),placeholder:"Add remarks (optional)",maxLength:"250"}),(0,i.jsxs)("p",{children:[r.length,"/250 characters"]}),p&&(0,i.jsx)("p",{className:"validation-message",children:p})]}),(0,i.jsx)("button",{className:"btn submit-btn",onClick:e=>{if(e.preventDefault(),!s)return void x("Please upload a file");if(r.length>250)return void x("Comment must be less than 250 characters");const t=m&&new Date>new Date(m.deadline);o(t?"Late Submission":"Submitted"),h((new Date).toISOString().split("T")[0]),alert("Assignment submitted successfully!")},disabled:g,children:"Submit Assignment"}),(0,i.jsxs)("div",{className:"status-card",children:[(0,i.jsx)("h3",{children:"Submission Status"}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Status:"})," ",l]}),c&&(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Submitted On:"})," ",c]}),"Late Submission"===l&&(0,i.jsx)("p",{className:"late-flag",children:"Late Submission"})]})]})},u=[{circular_id:"CR2025-001",title:"Mid-Sem Exam Schedule",description:"Exams begin Nov 10. See attached PDF for full timetable.",issued_by:"Admin",date:"2025-10-28",category:"Exam",attachment:"exam_schedule.pdf",is_new:!0},{circular_id:"CR2025-002",title:"Diwali Holiday Notice",description:"School closed on 15th Oct for Diwali celebrations.",issued_by:"Principal",date:"2025-10-10",category:"Holiday",attachment:"",is_new:!1},{circular_id:"CR2025-003",title:"Annual Sports Day Event",description:"Annual Sports Day on 25th Oct. All students participate.",issued_by:"Sports Committee",date:"2025-10-15",category:"Event",attachment:"sports_day.pdf",is_new:!0},{circular_id:"CR2025-004",title:"General Assembly Meeting",description:"Monthly general assembly on 5th Nov.",issued_by:"Admin",date:"2025-10-20",category:"General",attachment:"",is_new:!1}],m={Exam:"\ud83d\udcdd",Holiday:"\ud83c\udf89",Event:"\ud83d\udcc5",General:"\ud83d\udce2"},g=()=>{const[e]=(0,a.useState)(u),[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)(null),[d,o]=(0,a.useState)(!1),[c,h]=(0,a.useState)({category:"",dateFrom:"",dateTo:""});(0,a.useEffect)(()=>{let t=[...e];c.category&&(t=t.filter(e=>e.category===c.category)),c.dateFrom&&(t=t.filter(e=>e.date>=c.dateFrom)),c.dateTo&&(t=t.filter(e=>e.date<=c.dateTo)),t.sort((e,t)=>new Date(t.date)-new Date(e.date)),s(t)},[e,c]);const p=e=>{const{name:t,value:s}=e.target;h(e=>(0,l.A)((0,l.A)({},e),{},{[t]:s}))},x=()=>{r(null),o(!1)};return(0,i.jsxs)("div",{className:"menu-content",style:{padding:"20px"},children:[(0,i.jsx)("h1",{children:"Circulars / Notices"}),(0,i.jsxs)("div",{style:{marginBottom:"20px",display:"flex",flexWrap:"wrap",gap:"10px",alignItems:"center"},children:[(0,i.jsxs)("select",{name:"category",value:c.category,onChange:p,style:{padding:"8px",border:"1px solid #ccc",borderRadius:"4px"},"aria-label":"Filter by category",children:[(0,i.jsx)("option",{value:"",children:"All Categories"}),(0,i.jsx)("option",{value:"Exam",children:"Exam"}),(0,i.jsx)("option",{value:"Holiday",children:"Holiday"}),(0,i.jsx)("option",{value:"Event",children:"Event"}),(0,i.jsx)("option",{value:"General",children:"General"})]}),(0,i.jsx)("input",{type:"date",name:"dateFrom",value:c.dateFrom,onChange:p,placeholder:"From Date",style:{padding:"8px",border:"1px solid #ccc",borderRadius:"4px"},"aria-label":"Filter from date"}),(0,i.jsx)("input",{type:"date",name:"dateTo",value:c.dateTo,onChange:p,placeholder:"To Date",style:{padding:"8px",border:"1px solid #ccc",borderRadius:"4px"},"aria-label":"Filter to date"}),(0,i.jsx)("button",{onClick:()=>h({category:"",dateFrom:"",dateTo:""}),style:{padding:"8px 12px",backgroundColor:"#f0f0f0",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer"},children:"Reset Filters"})]}),(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:t.length>0?t.map(e=>(0,i.jsxs)("div",{onClick:()=>(e=>{r(e),o(!0)})(e),style:{border:"1px solid #ddd",borderRadius:"8px",padding:"15px",cursor:"pointer",backgroundColor:"#fff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"box-shadow 0.2s",position:"relative"},onMouseEnter:e=>e.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.2)",onMouseLeave:e=>e.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)","aria-label":"View details for ".concat(e.title),children:[e.is_new&&(0,i.jsx)("span",{style:{position:"absolute",top:"10px",right:"10px",backgroundColor:"#ff5722",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"12px"},children:"New"}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[(0,i.jsx)("span",{style:{fontSize:"24px",marginRight:"10px"},children:m[e.category]}),(0,i.jsx)("h3",{style:{margin:0,fontSize:"18px"},children:e.title})]}),(0,i.jsxs)("p",{style:{margin:"5px 0",color:"#666"},children:[(0,i.jsx)("strong",{children:"Issued By:"})," ",e.issued_by]}),(0,i.jsxs)("p",{style:{margin:"5px 0",color:"#666"},children:[(0,i.jsx)("strong",{children:"Date:"})," ",e.date]}),(0,i.jsx)("span",{style:{display:"inline-block",backgroundColor:"#e0e0e0",padding:"4px 8px",borderRadius:"4px",fontSize:"14px"},children:e.category})]},e.circular_id)):(0,i.jsxs)("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"40px",color:"#666"},children:[(0,i.jsx)("span",{style:{fontSize:"48px"},children:"\ud83d\udcc4"}),(0,i.jsx)("p",{children:"No circulars found matching the filters."})]})}),d&&n&&(0,i.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:x,"aria-modal":"true",role:"dialog","aria-labelledby":"modal-title",children:(0,i.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",width:"90%",maxWidth:"500px",maxHeight:"80%",overflowY:"auto"},onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("h2",{id:"modal-title",children:n.title}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Issued By:"})," ",n.issued_by]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Date:"})," ",n.date]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Description:"})," ",n.description]}),n.attachment&&(0,i.jsxs)("div",{style:{marginTop:"20px"},children:[(0,i.jsx)("h3",{children:"Attachment"}),(0,i.jsxs)("button",{onClick:()=>(e=>{if(e){const t=document.createElement("a");t.href="#",t.download=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}})(n.attachment),style:{padding:"8px 12px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},"aria-label":"Download ".concat(n.attachment),children:["Download ",n.attachment]})]}),(0,i.jsx)("button",{onClick:x,style:{marginTop:"20px",padding:"8px 12px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},"aria-label":"Close modal",children:"Close"})]})})]})},j=e=>{let{feeLedger:t=[],filters:s,setFilters:n}=e;const[r,d]=(0,a.useState)({feeType:"",dateRange:{start:"",end:""}}),[o,c]=(0,a.useState)(""),h=s||r,p=n||d,x=(0,a.useMemo)(()=>{if(!t||!Array.isArray(t)||!h)return[];return t.filter(e=>{const t=!h.feeType||e.fee_type===h.feeType,s=(!h.dateRange.start||new Date(e.date)>=new Date(h.dateRange.start))&&(!h.dateRange.end||new Date(e.date)<=new Date(h.dateRange.end));return t&&s}).sort((e,t)=>new Date(t.date)-new Date(e.date))},[t,h]),u=e=>{const{name:t,value:s}=e.target;"function"===typeof p&&("feeType"===t?p(e=>(0,l.A)((0,l.A)({},e),{},{feeType:s})):"startDate"===t?p(e=>(0,l.A)((0,l.A)({},e),{},{dateRange:(0,l.A)((0,l.A)({},e.dateRange),{},{start:s})})):"endDate"===t&&p(e=>(0,l.A)((0,l.A)({},e),{},{dateRange:(0,l.A)((0,l.A)({},e.dateRange),{},{end:s})})))};return(0,i.jsxs)("div",{className:"fees-ledger-section",children:[(0,i.jsx)("h2",{children:"View Fees Ledger"}),(0,i.jsxs)("div",{className:"filter-bar",children:[(0,i.jsxs)("select",{name:"feeType",value:h.feeType,onChange:u,children:[(0,i.jsx)("option",{value:"",children:"All Fee Types"}),(0,i.jsx)("option",{value:"Tuition",children:"Tuition"}),(0,i.jsx)("option",{value:"Hostel",children:"Hostel"}),(0,i.jsx)("option",{value:"Exam",children:"Exam"})]}),(0,i.jsx)("input",{type:"date",name:"startDate",placeholder:"Start Date",value:h.dateRange.start,onChange:u}),(0,i.jsx)("input",{type:"date",name:"endDate",placeholder:"End Date",value:h.dateRange.end,onChange:u}),(0,i.jsxs)("select",{value:o,onChange:e=>c(e.target.value),children:[(0,i.jsx)("option",{value:"",children:"All Classes"}),(0,i.jsx)("option",{value:"Class A",children:"Class A"}),(0,i.jsx)("option",{value:"Class B",children:"Class B"})]})]}),x.length>0?(0,i.jsxs)("table",{className:"fees-table",role:"table","aria-label":"Fees Ledger",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Transaction Date"}),(0,i.jsx)("th",{children:"Fee Type"}),(0,i.jsx)("th",{children:"Amount"}),(0,i.jsx)("th",{children:"Payment Mode"}),(0,i.jsx)("th",{children:"Status"})]})}),(0,i.jsx)("tbody",{children:x.map(e=>{return(0,i.jsxs)("tr",{title:"Receipt ID: ".concat(e.transaction_id),children:[(0,i.jsx)("td",{children:e.date}),(0,i.jsx)("td",{children:e.fee_type}),(0,i.jsxs)("td",{children:["\u20b9",e.amount]}),(0,i.jsx)("td",{children:e.payment_mode}),(0,i.jsx)("td",{children:(t=e.status,(0,i.jsx)("span",{className:{Paid:"badge paid",Pending:"badge pending",Overdue:"badge overdue"}[t]||"badge",children:t}))})]},e.transaction_id);var t})})]}):(0,i.jsx)("div",{className:"empty-state",children:(0,i.jsx)("p",{children:"No fee records found"})})]})},y=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!1),[r,d]=(0,a.useState)("");(0,a.useEffect)(()=>{l()},[]);const l=async()=>{try{const e=localStorage.getItem("token"),s=await fetch("http://localhost:5000/api/concessions/my",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){const e=await s.json();t(e)}else d("Failed to fetch concessions")}catch(e){console.error("Error fetching concessions:",e),d("Error fetching concessions: "+e.message)}};return(0,i.jsxs)("div",{className:"menu-content",children:[(0,i.jsx)("h1",{children:"My Concessions"}),(0,i.jsx)("p",{children:"View your approved concessions and scholarships."}),r&&(0,i.jsx)("div",{style:{padding:"10px",margin:"10px 0",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:r.includes("Error")||r.includes("Failed")?"#ffebee":"#e8f5e8",color:r.includes("Error")||r.includes("Failed")?"#c62828":"#2e7d32"},children:r}),(0,i.jsx)("div",{style:{maxHeight:"600px",overflowY:"auto"},children:e.length>0?(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{backgroundColor:"#f8f9fa"},children:[(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Type"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Amount"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Reason"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Academic Year"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Semester"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Status"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Date"})]})}),(0,i.jsx)("tbody",{children:e.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:e.concessionType}),(0,i.jsxs)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:["\u20b9",e.amount]}),(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:e.reason}),(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:e.academicYear}),(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:e.semester}),(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:(0,i.jsx)("span",{style:{padding:"3px 8px",borderRadius:"12px",backgroundColor:"Approved"===e.status?"#28a745":"Pending"===e.status?"#ffc107":"#dc3545",color:"white",fontSize:"12px"},children:e.status})}),(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:new Date(e.createdAt).toLocaleDateString()})]},e._id))})]}):(0,i.jsx)("p",{children:"No concessions found."})})]})},f=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!1),[r,d]=(0,a.useState)("");(0,a.useEffect)(()=>{l()},[]);const l=async()=>{try{const e=localStorage.getItem("token"),s=await fetch("http://localhost:5000/api/notifications/my",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){const e=await s.json();t(e)}else d("Failed to fetch notifications")}catch(e){console.error("Error fetching notifications:",e),d("Error fetching notifications: "+e.message)}},o=e=>{switch(e){case"high":return"#dc3545";case"normal":return"#ffc107";case"low":return"#28a745";default:return"#6c757d"}};return(0,i.jsxs)("div",{className:"menu-content",children:[(0,i.jsx)("h1",{children:"My Notifications"}),(0,i.jsx)("p",{children:"View your notifications and updates."}),r&&(0,i.jsx)("div",{style:{padding:"10px",margin:"10px 0",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:r.includes("Error")||r.includes("Failed")?"#ffebee":"#e8f5e8",color:r.includes("Error")||r.includes("Failed")?"#c62828":"#2e7d32"},children:r}),(0,i.jsx)("div",{style:{maxHeight:"600px",overflowY:"auto"},children:e.length>0?(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{backgroundColor:"#f8f9fa"},children:[(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Title"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Type"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Message"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Priority"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Status"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Date"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Actions"})]})}),(0,i.jsx)("tbody",{children:e.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:e.title}),(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:e.type}),(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:e.message}),(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:(0,i.jsx)("span",{style:{padding:"3px 8px",borderRadius:"12px",backgroundColor:o(e.priority),color:"white",fontSize:"12px"},children:e.priority})}),(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:(0,i.jsx)("span",{style:{padding:"3px 8px",borderRadius:"12px",backgroundColor:e.isRead?"#28a745":"#ffc107",color:"white",fontSize:"12px"},children:e.isRead?"Read":"Unread"})}),(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:new Date(e.createdAt).toLocaleDateString()}),(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:!e.isRead&&(0,i.jsx)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("token");(await fetch("http://localhost:5000/api/notifications/".concat(e,"/read"),{method:"PUT",headers:{Authorization:"Bearer ".concat(t)}})).ok?(d("Notification marked as read!"),l()):d("Failed to mark notification as read")}catch(t){d("Error marking notification as read: "+t.message)}})(e._id),style:{padding:"5px 10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Mark Read"})})]},e._id))})]}):(0,i.jsx)("p",{children:"No notifications found."})})]})},b=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!1),[r,d]=(0,a.useState)(""),[o,c]=(0,a.useState)({startDate:"",endDate:"",status:""});(0,a.useEffect)(()=>{h()},[]);const h=async()=>{try{const e=localStorage.getItem("token"),s=await fetch("http://localhost:5000/api/receipts/my",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){const e=await s.json();t(e)}else d("Failed to fetch receipts")}catch(e){console.error("Error fetching receipts:",e),d("Error fetching receipts: "+e.message)}},p=e=>{const{name:t,value:s}=e.target;c(e=>(0,l.A)((0,l.A)({},e),{},{[t]:s}))},x=e.filter(e=>{const t=!o.startDate||new Date(e.createdAt)>=new Date(o.startDate),s=!o.endDate||new Date(e.createdAt)<=new Date(o.endDate),a=!o.status||e.status===o.status;return t&&s&&a});return(0,i.jsxs)("div",{className:"menu-content",children:[(0,i.jsx)("h1",{children:"Download Receipts"}),(0,i.jsx)("p",{children:"View and download your payment receipts."}),r&&(0,i.jsx)("div",{style:{padding:"10px",margin:"10px 0",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:r.includes("Error")||r.includes("Failed")?"#ffebee":"#e8f5e8",color:r.includes("Error")||r.includes("Failed")?"#c62828":"#2e7d32"},children:r}),(0,i.jsxs)("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Start Date:"}),(0,i.jsx)("input",{type:"date",name:"startDate",value:o.startDate,onChange:p,style:{marginLeft:"5px",padding:"5px"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"End Date:"}),(0,i.jsx)("input",{type:"date",name:"endDate",value:o.endDate,onChange:p,style:{marginLeft:"5px",padding:"5px"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Status:"}),(0,i.jsxs)("select",{name:"status",value:o.status,onChange:p,style:{marginLeft:"5px",padding:"5px"},children:[(0,i.jsx)("option",{value:"",children:"All Status"}),(0,i.jsx)("option",{value:"Active",children:"Active"}),(0,i.jsx)("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),(0,i.jsx)("div",{style:{maxHeight:"600px",overflowY:"auto"},children:x.length>0?(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{backgroundColor:"#f8f9fa"},children:[(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Receipt No"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Amount"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Fee Breakdown"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Status"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Date"}),(0,i.jsx)("th",{style:{padding:"10px",border:"1px solid #ddd",textAlign:"left"},children:"Actions"})]})}),(0,i.jsx)("tbody",{children:x.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:e.receiptNumber}),(0,i.jsxs)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:["\u20b9",e.amount]}),(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:e.feeBreakdown||"N/A"}),(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:(0,i.jsx)("span",{style:{padding:"3px 8px",borderRadius:"12px",backgroundColor:"Active"===e.status?"#28a745":"#dc3545",color:"white",fontSize:"12px"},children:e.status})}),(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:new Date(e.createdAt).toLocaleDateString()}),(0,i.jsx)("td",{style:{padding:"10px",border:"1px solid #ddd"},children:"Active"===e.status&&(0,i.jsx)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("token"),s=await fetch("http://localhost:5000/api/receipts/".concat(e,"/download"),{headers:{Authorization:"Bearer ".concat(t)}});if(s.ok){const t=await s.blob(),a=window.URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download="receipt_".concat(e,".pdf"),document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(a),document.body.removeChild(n)}else d("Failed to download receipt")}catch(t){d("Error downloading receipt: "+t.message)}})(e._id),style:{padding:"5px 10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Download"})})]},e._id))})]}):(0,i.jsx)("p",{children:"No receipts found."})})]})};var v=s(3137);const w=()=>{const[e,t]=(0,a.useState)({category:"",subject:"",description:"",attachment:null}),[s,n]=(0,a.useState)({}),[r,d]=(0,a.useState)("");(0,a.useEffect)(()=>{const e=(new Date).toISOString().split("T")[0];t(t=>(0,l.A)((0,l.A)({},t),{},{date_raised:e}))},[]);return(0,i.jsxs)("div",{className:"menu-content",children:[(0,i.jsx)("h1",{children:"Raise Complaint"}),r&&(0,i.jsx)("div",{className:"toast",children:r}),(0,i.jsxs)("form",{onSubmit:s=>{if(s.preventDefault(),!(()=>{const t={};return e.category||(t.category="Category is required"),e.subject?e.subject.length>100&&(t.subject="Subject must be max 100 characters"):t.subject="Subject is required",e.description?e.description.length<30&&(t.description="Description must be at least 30 characters"):t.description="Description is required",e.attachment&&e.attachment.size>5242880&&(t.attachment="File size must be less than 5MB"),n(t),0===Object.keys(t).length})())return;const a=JSON.parse(localStorage.getItem("studentComplaints")||"[]"),i=a.length+1,r={complaint_id:"CMP".concat((new Date).getFullYear(),"-").concat(String(i).padStart(3,"0")),category:e.category,subject:e.subject,description:e.description,date_raised:e.date_raised,status:"Pending",attachment:e.attachment?e.attachment.name:null,admin_remarks:""};a.push(r),localStorage.setItem("studentComplaints",JSON.stringify(a)),d("Complaint raised successfully!"),setTimeout(()=>d(""),3e3),t({category:"",subject:"",description:"",attachment:null,date_raised:(new Date).toISOString().split("T")[0]}),n({})},className:"complaint-form",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Category *"}),(0,i.jsxs)("select",{value:e.category,onChange:s=>t((0,l.A)((0,l.A)({},e),{},{category:s.target.value})),className:s.category?"error":"",children:[(0,i.jsx)("option",{value:"",children:"Select Category"}),(0,i.jsx)("option",{value:"Hostel",children:"Hostel"}),(0,i.jsx)("option",{value:"Academics",children:"Academics"}),(0,i.jsx)("option",{value:"Transport",children:"Transport"}),(0,i.jsx)("option",{value:"Fees",children:"Fees"}),(0,i.jsx)("option",{value:"Exam",children:"Exam"}),(0,i.jsx)("option",{value:"Other",children:"Other"})]}),s.category&&(0,i.jsx)("span",{className:"error-text",children:s.category})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Subject *"}),(0,i.jsx)("input",{type:"text",value:e.subject,onChange:s=>t((0,l.A)((0,l.A)({},e),{},{subject:s.target.value})),maxLength:"100",className:s.subject?"error":""}),s.subject&&(0,i.jsx)("span",{className:"error-text",children:s.subject})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Description *"}),(0,i.jsx)("textarea",{value:e.description,onChange:s=>t((0,l.A)((0,l.A)({},e),{},{description:s.target.value})),minLength:"30",className:s.description?"error":""}),s.description&&(0,i.jsx)("span",{className:"error-text",children:s.description})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Attachment (Optional)"}),(0,i.jsx)("input",{type:"file",onChange:s=>{t((0,l.A)((0,l.A)({},e),{},{attachment:s.target.files[0]}))},accept:"image/*,.pdf"}),s.attachment&&(0,i.jsx)("span",{className:"error-text",children:s.attachment})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Date Raised"}),(0,i.jsx)("input",{type:"date",value:e.date_raised,readOnly:!0})]}),(0,i.jsxs)("div",{className:"form-buttons",children:[(0,i.jsx)("button",{type:"submit",className:"btn submit-btn",children:"Submit"}),(0,i.jsx)("button",{type:"button",onClick:()=>{t({category:"",subject:"",description:"",attachment:null,date_raised:(new Date).toISOString().split("T")[0]}),n({})},className:"btn reset-btn",children:"Reset"})]})]})]})},S=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[r,d]=(0,a.useState)({category:"",status:"",dateFrom:"",dateTo:""}),[o,c]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),x=[{complaint_id:"CMP2023-001",category:"Hostel",subject:"Room Cleaning Issue",description:"The room has not been cleaned for the past week. Dust and dirt accumulation is affecting my health.",date_raised:"2023-10-15",status:"Resolved",attachment:null,admin_remarks:"Issue resolved. Cleaning staff has been notified."},{complaint_id:"CMP2023-002",category:"Academics",subject:"Late Assignment Submission",description:"I was unable to submit my assignment on time due to technical issues with the portal.",date_raised:"2023-10-20",status:"In Progress",attachment:"assignment.pdf",admin_remarks:"Under review by faculty."},{complaint_id:"CMP2023-003",category:"Transport",subject:"Bus Delay",description:"The college bus was delayed by 30 minutes this morning, causing me to miss my first class.",date_raised:"2023-10-22",status:"Pending",attachment:null,admin_remarks:""},{complaint_id:"CMP2023-004",category:"Fees",subject:"Incorrect Fee Receipt",description:"The fee receipt generated shows incorrect amount. I paid extra but it's not reflected.",date_raised:"2023-10-18",status:"Rejected",attachment:"fee_receipt.pdf",admin_remarks:"Please contact accounts department for clarification."},{complaint_id:"CMP2023-005",category:"Exam",subject:"Exam Hall Issue",description:"The seating arrangement in the exam hall was incorrect, leading to confusion during the exam.",date_raised:"2023-10-25",status:"Resolved",attachment:null,admin_remarks:"Seating corrected for future exams."},{complaint_id:"CMP2023-006",category:"Other",subject:"Library Book Availability",description:"The required book for my project is not available in the library despite being listed.",date_raised:"2023-10-28",status:"In Progress",attachment:null,admin_remarks:"Checking inventory."}];(0,a.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("studentComplaints")||"[]");0===e.length&&(localStorage.setItem("studentComplaints",JSON.stringify(x)),e=x);const s=e.sort((e,t)=>new Date(t.date_raised)-new Date(e.date_raised));t(s),n(s)},[]),(0,a.useEffect)(()=>{let t=e;r.category&&(t=t.filter(e=>e.category===r.category)),r.status&&(t=t.filter(e=>e.status===r.status)),r.dateFrom&&(t=t.filter(e=>new Date(e.date_raised)>=new Date(r.dateFrom))),r.dateTo&&(t=t.filter(e=>new Date(e.date_raised)<=new Date(r.dateTo))),n(t)},[r,e]);const u=e=>{switch(e){case"Pending":return"status-pending";case"In Progress":return"status-in-progress";case"Resolved":return"status-resolved";case"Rejected":return"status-rejected";default:return""}},m=()=>{c(!1),p(null)},g=e=>{const t=new Date;return t.setDate(t.getDate()-3),new Date(e)>t};return(0,i.jsxs)("div",{className:"menu-content",children:[(0,i.jsx)("h1",{children:"My Complaints"}),(0,i.jsxs)("div",{className:"filters",children:[(0,i.jsxs)("select",{value:r.category,onChange:e=>d((0,l.A)((0,l.A)({},r),{},{category:e.target.value})),children:[(0,i.jsx)("option",{value:"",children:"All Categories"}),(0,i.jsx)("option",{value:"Hostel",children:"Hostel"}),(0,i.jsx)("option",{value:"Academics",children:"Academics"}),(0,i.jsx)("option",{value:"Transport",children:"Transport"}),(0,i.jsx)("option",{value:"Fees",children:"Fees"}),(0,i.jsx)("option",{value:"Exam",children:"Exam"}),(0,i.jsx)("option",{value:"Other",children:"Other"})]}),(0,i.jsxs)("select",{value:r.status,onChange:e=>d((0,l.A)((0,l.A)({},r),{},{status:e.target.value})),children:[(0,i.jsx)("option",{value:"",children:"All Statuses"}),(0,i.jsx)("option",{value:"Pending",children:"Pending"}),(0,i.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,i.jsx)("option",{value:"Resolved",children:"Resolved"}),(0,i.jsx)("option",{value:"Rejected",children:"Rejected"})]}),(0,i.jsx)("input",{type:"date",value:r.dateFrom,onChange:e=>d((0,l.A)((0,l.A)({},r),{},{dateFrom:e.target.value})),placeholder:"From Date"}),(0,i.jsx)("input",{type:"date",value:r.dateTo,onChange:e=>d((0,l.A)((0,l.A)({},r),{},{dateTo:e.target.value})),placeholder:"To Date"})]}),(0,i.jsxs)("table",{className:"complaints-table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Complaint ID"}),(0,i.jsx)("th",{children:"Category"}),(0,i.jsx)("th",{children:"Subject"}),(0,i.jsx)("th",{children:"Date Raised"}),(0,i.jsx)("th",{children:"Status"}),(0,i.jsx)("th",{children:"Action"})]})}),(0,i.jsx)("tbody",{children:s.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:[e.complaint_id," ",g(e.date_raised)&&(0,i.jsx)("span",{className:"new-badge",children:"New"})]}),(0,i.jsx)("td",{children:e.category}),(0,i.jsx)("td",{children:e.subject}),(0,i.jsx)("td",{children:e.date_raised}),(0,i.jsx)("td",{children:(0,i.jsx)("span",{className:"status ".concat(u(e.status)),children:e.status})}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{className:"view-btn",onClick:()=>(e=>{p(e),c(!0)})(e),children:"View"})})]},e.complaint_id))})]}),o&&h&&(0,i.jsx)("div",{className:"modal-overlay",onClick:m,children:(0,i.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("h2",{children:h.subject}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Description:"})," ",h.description]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Category:"})," ",h.category]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Date Raised:"})," ",h.date_raised]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Status:"})," ",(0,i.jsx)("span",{className:"status ".concat(u(h.status)),children:h.status})]}),h.attachment&&(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Attachment:"})," ",(0,i.jsx)("a",{href:"#",onClick:()=>alert("Attachment preview not implemented"),children:h.attachment})]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Admin Remarks:"})," ",h.admin_remarks||"No remarks yet"]}),(0,i.jsx)("button",{className:"close-btn",onClick:m,children:"Close"})]})})]})},C=()=>{const[e]=(0,a.useState)({totalDays:120,presentDays:102,absentDays:18,percentage:85}),[t]=(0,a.useState)([{subject_id:"PHY101",subject_name:"Mechanics",total_classes:40,attended:34,missed:6,percentage:85,status:"Eligible"},{subject_id:"CHE102",subject_name:"Organic Chemistry",total_classes:35,attended:28,missed:7,percentage:80,status:"Eligible"},{subject_id:"MAT103",subject_name:"Calculus",total_classes:45,attended:30,missed:15,percentage:67,status:"At Risk"}]),[s,n]=(0,a.useState)({key:null,direction:"ascending"}),r=a.useMemo(()=>{let e=[...t];return null!==s.key&&e.sort((e,t)=>e[s.key]<t[s.key]?"ascending"===s.direction?-1:1:e[s.key]>t[s.key]?"ascending"===s.direction?1:-1:0),e},[t,s]),d=e=>{let t="ascending";s.key===e&&"ascending"===s.direction&&(t="descending"),n({key:e,direction:t})},[l,o]=(0,a.useState)(null),[c,h]=(0,a.useState)([]),[p,x]=(0,a.useState)(!1),u=e=>e>85?"good":e>=75?"warning":"critical";return(0,i.jsxs)("div",{className:"menu-content",children:[(0,i.jsx)("h1",{children:"Attendance"}),(0,i.jsxs)("div",{className:"attendance-summary-card",children:[(0,i.jsx)("h2",{children:"Overall Attendance Summary"}),(0,i.jsxs)("div",{className:"summary-stats",children:[(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("label",{children:"Total Working Days"}),(0,i.jsx)("span",{children:e.totalDays})]}),(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("label",{children:"Days Present"}),(0,i.jsx)("span",{children:e.presentDays})]}),(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("label",{children:"Days Absent"}),(0,i.jsx)("span",{children:e.absentDays})]}),(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("label",{children:"Attendance %"}),(0,i.jsxs)("span",{children:[e.percentage,"%"]})]})]}),(0,i.jsxs)("div",{className:"status-section",children:[(0,i.jsx)("div",{className:"status-badge ".concat(u(e.percentage)),children:(m=e.percentage,m>85?"Good":m>=75?"Warning":"Critical")}),(0,i.jsx)("div",{className:"progress-bar",children:(0,i.jsx)("div",{className:"progress-fill",style:{width:"".concat(e.percentage,"%")}})})]}),(0,i.jsx)("div",{className:"tooltip",children:"Minimum 75% required for exam eligibility"})]}),(0,i.jsxs)("div",{className:"subject-attendance-table",children:[(0,i.jsx)("h2",{children:"Subject-wise Attendance"}),(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsxs)("th",{onClick:()=>d("subject_name"),style:{cursor:"pointer"},children:["Subject Name ","subject_name"===s.key?"ascending"===s.direction?"\u2191":"\u2193":""]}),(0,i.jsxs)("th",{onClick:()=>d("total_classes"),style:{cursor:"pointer"},children:["Total Classes ","total_classes"===s.key?"ascending"===s.direction?"\u2191":"\u2193":""]}),(0,i.jsxs)("th",{onClick:()=>d("attended"),style:{cursor:"pointer"},children:["Classes Attended ","attended"===s.key?"ascending"===s.direction?"\u2191":"\u2193":""]}),(0,i.jsxs)("th",{onClick:()=>d("missed"),style:{cursor:"pointer"},children:["Classes Missed ","missed"===s.key?"ascending"===s.direction?"\u2191":"\u2193":""]}),(0,i.jsxs)("th",{onClick:()=>d("percentage"),style:{cursor:"pointer"},children:["Attendance % ","percentage"===s.key?"ascending"===s.direction?"\u2191":"\u2193":""]}),(0,i.jsx)("th",{children:"Status"}),(0,i.jsx)("th",{children:"Actions"})]})}),(0,i.jsx)("tbody",{children:r.map(e=>(0,i.jsxs)("tr",{className:u(e.percentage),children:[(0,i.jsx)("td",{children:e.subject_name}),(0,i.jsx)("td",{children:e.total_classes}),(0,i.jsx)("td",{children:e.attended}),(0,i.jsx)("td",{children:e.missed}),(0,i.jsxs)("td",{children:[e.percentage,"%"]}),(0,i.jsx)("td",{children:e.status}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{onClick:()=>(e=>{o(e),h([{date:"2023-10-01",time_slot:"10:00\u201311:00",faculty:"Dr. A. Sharma",status:"Present"},{date:"2023-10-02",time_slot:"11:00\u201312:00",faculty:"Dr. A. Sharma",status:"Absent"},{date:"2023-10-03",time_slot:"10:00\u201311:00",faculty:"Dr. A. Sharma",status:"Present"}]),x(!0)})(e),children:"View Daily Logs"})})]},e.subject_id))})]})]}),p&&(0,i.jsx)("div",{className:"modal-overlay",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("h2",{children:["Daily Attendance Logs - ",null===l||void 0===l?void 0:l.subject_name]}),(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Date"}),(0,i.jsx)("th",{children:"Time Slot"}),(0,i.jsx)("th",{children:"Faculty Name"}),(0,i.jsx)("th",{children:"Status"})]})}),(0,i.jsx)("tbody",{children:c.map((e,t)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.date}),(0,i.jsx)("td",{children:e.time_slot}),(0,i.jsx)("td",{children:e.faculty}),(0,i.jsx)("td",{children:e.status})]},t))})]}),(0,i.jsx)("button",{onClick:()=>{x(!1),o(null)},children:"Close"})]})})]});var m},A=()=>{const[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(!1),[r,d]=(0,a.useState)({category:"",dateRange:{start:"",end:""},search:""}),o=(0,a.useMemo)(()=>[{notice_id:"NTC2025-001",title:"Mid-Sem Exam Schedule",description:"Exams begin Nov 10. See attached PDF for full timetable.",issued_by:"Admin",date:"2025-10-28",category:"Exam",attachment:"exam_schedule.pdf",is_new:!0,target_audience:"All Students"},{notice_id:"NTC2025-002",title:"Holiday Notice - Diwali",description:"College will remain closed from Nov 1-5 for Diwali celebrations.",issued_by:"Principal",date:"2025-10-25",category:"Holiday",attachment:null,is_new:!0,target_audience:"All Students"},{notice_id:"NTC2025-003",title:"Placement Drive - TCS",description:"TCS recruitment drive scheduled for Nov 15. Register by Nov 10.",issued_by:"Placement Officer",date:"2025-10-20",category:"Placement",attachment:"tcs_placement_details.pdf",is_new:!1,target_audience:"Final Year Students"},{notice_id:"NTC2025-004",title:"Annual Sports Day",description:"Sports day will be held on Dec 5. Participation mandatory for all.",issued_by:"Sports Committee",date:"2025-10-15",category:"Event",attachment:"sports_day_schedule.pdf",is_new:!1,target_audience:"All Students"},{notice_id:"NTC2025-005",title:"Fee Payment Reminder",description:"Last date for fee payment is Oct 31. Late fees will apply.",issued_by:"Accounts Department",date:"2025-10-10",category:"General",attachment:null,is_new:!1,target_audience:"All Students"}],[]),c=(0,a.useMemo)(()=>o.filter(e=>{const t=!r.category||e.category===r.category,s=(!r.dateRange.start||new Date(e.date)>=new Date(r.dateRange.start))&&(!r.dateRange.end||new Date(e.date)<=new Date(r.dateRange.end)),a=!r.search||e.title.toLowerCase().includes(r.search.toLowerCase())||e.description.toLowerCase().includes(r.search.toLowerCase());return t&&s&&a}).sort((e,t)=>new Date(t.date)-new Date(e.date)),[o,r]),h=()=>{n(!1),t(null)},p=e=>{const{name:t,value:s}=e.target;"category"===t||"search"===t?d(e=>(0,l.A)((0,l.A)({},e),{},{[t]:s})):"startDate"===t?d(e=>(0,l.A)((0,l.A)({},e),{},{dateRange:(0,l.A)((0,l.A)({},e.dateRange),{},{start:s})})):"endDate"===t&&d(e=>(0,l.A)((0,l.A)({},e),{},{dateRange:(0,l.A)((0,l.A)({},e.dateRange),{},{end:s})}))};return(0,i.jsxs)("div",{className:"notice-board",children:[(0,i.jsx)("h1",{children:"Notice Board"}),(0,i.jsxs)("div",{className:"filter-bar",children:[(0,i.jsxs)("select",{name:"category",value:r.category,onChange:p,children:[(0,i.jsx)("option",{value:"",children:"All Categories"}),(0,i.jsx)("option",{value:"Exam",children:"Exam"}),(0,i.jsx)("option",{value:"Holiday",children:"Holiday"}),(0,i.jsx)("option",{value:"Event",children:"Event"}),(0,i.jsx)("option",{value:"General",children:"General"}),(0,i.jsx)("option",{value:"Placement",children:"Placement"}),(0,i.jsx)("option",{value:"Circular",children:"Circular"})]}),(0,i.jsx)("input",{type:"date",name:"startDate",placeholder:"Start Date",value:r.dateRange.start,onChange:p}),(0,i.jsx)("input",{type:"date",name:"endDate",placeholder:"End Date",value:r.dateRange.end,onChange:p}),(0,i.jsx)("input",{type:"text",name:"search",placeholder:"Search notices...",value:r.search,onChange:p}),(0,i.jsx)("button",{onClick:()=>{d({category:"",dateRange:{start:"",end:""},search:""})},className:"reset-btn",children:"Reset"})]}),(0,i.jsx)("div",{className:"notice-list",children:c.length>0?c.map(e=>{return(0,i.jsxs)("div",{className:"notice-card ".concat(e.is_new?"new":""),onClick:()=>(e=>{t(e),n(!0)})(e),children:[(0,i.jsxs)("div",{className:"notice-header",children:[(0,i.jsx)("span",{className:"category-icon",children:(s=e.category,{Exam:"\ud83d\udcdd",Holiday:"\ud83c\udf89",Event:"\ud83d\udcc5",General:"\ud83d\udce2",Placement:"\ud83d\udcbc",Circular:"\ud83d\udcc4"}[s]||"\ud83d\udcc4")}),(0,i.jsx)("h3",{children:e.title}),e.is_new&&(0,i.jsx)("span",{className:"new-badge",children:"New"})]}),(0,i.jsxs)("div",{className:"notice-meta",children:[(0,i.jsxs)("span",{className:"issued-by",children:["By: ",e.issued_by]}),(0,i.jsx)("span",{className:"date",children:e.date}),(0,i.jsx)("span",{className:"category",children:e.category})]}),(0,i.jsx)("p",{className:"notice-preview",children:e.description.length>100?"".concat(e.description.substring(0,100),"..."):e.description}),e.attachment&&(0,i.jsx)("div",{className:"attachment-indicator",children:"\ud83d\udcce Attachment available"})]},e.notice_id);var s}):(0,i.jsx)("div",{className:"empty-state",children:(0,i.jsx)("p",{children:"No notices found matching your filters."})})}),s&&e&&(0,i.jsx)("div",{className:"modal-overlay",onClick:h,children:(0,i.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h2",{children:e.title}),(0,i.jsx)("button",{className:"close-btn",onClick:h,children:"\xd7"})]}),(0,i.jsx)("div",{className:"modal-body",children:(0,i.jsxs)("div",{className:"notice-details",children:[(0,i.jsxs)("div",{className:"detail-row",children:[(0,i.jsx)("strong",{children:"Issued By:"})," ",e.issued_by]}),(0,i.jsxs)("div",{className:"detail-row",children:[(0,i.jsx)("strong",{children:"Date:"})," ",e.date]}),(0,i.jsxs)("div",{className:"detail-row",children:[(0,i.jsx)("strong",{children:"Category:"})," ",e.category]}),(0,i.jsxs)("div",{className:"detail-row",children:[(0,i.jsx)("strong",{children:"Target Audience:"})," ",e.target_audience]}),(0,i.jsxs)("div",{className:"detail-row",children:[(0,i.jsx)("strong",{children:"Description:"}),(0,i.jsx)("p",{children:e.description})]}),e.attachment&&(0,i.jsxs)("div",{className:"detail-row",children:[(0,i.jsx)("strong",{children:"Attachment:"}),(0,i.jsxs)("button",{className:"download-btn",onClick:()=>alert("Downloading ".concat(e.attachment)),children:["\ud83d\udcc4 Download ",e.attachment]})]})]})})]})})]})},N=()=>{const[e,t]=(0,a.useState)({old:"",new:"",confirm:""}),s=s=>{t((0,l.A)((0,l.A)({},e),{},{[s.target.name]:s.target.value}))};return(0,i.jsxs)("div",{className:"menu-content",children:[(0,i.jsx)("h1",{children:"Change Password"}),(0,i.jsxs)("form",{onSubmit:t=>{t.preventDefault(),e.new===e.confirm?alert("Password changed successfully!"):alert("New passwords do not match!")},children:[(0,i.jsx)("input",{type:"password",name:"old",placeholder:"Old Password",value:e.old,onChange:s,required:!0}),(0,i.jsx)("input",{type:"password",name:"new",placeholder:"New Password",value:e.new,onChange:s,required:!0}),(0,i.jsx)("input",{type:"password",name:"confirm",placeholder:"Confirm New Password",value:e.confirm,onChange:s,required:!0}),(0,i.jsx)("button",{type:"submit",className:"btn",children:"Change Password"})]})]})},D=()=>{const[e,t]=(0,a.useState)({}),[s,n]=(0,a.useState)(!1);return(0,i.jsxs)("div",{className:"upload-documents",children:[(0,i.jsx)("h2",{children:"Upload Documents"}),(0,i.jsx)("form",{children:["10th (High School) Marksheet","12th (Intermediate) Marksheet","Transfer Certificate (TC) from last institute","Character Certificate","Caste Certificate","Domicile Certificate","Recent passport size photographs","Aadhaar Card or any valid Identity Proof"].map(a=>(0,i.jsxs)("div",{className:"document-upload",children:[(0,i.jsxs)("label",{children:[a,":"]}),(0,i.jsx)("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png","data-doctype":a,onChange:e=>((e,s)=>{const a=e.target.files[0];a&&t(e=>(0,l.A)((0,l.A)({},e),{},{[s]:a}))})(e,a)}),e[a]&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{children:["Selected: ",e[a].name]}),(0,i.jsx)("button",{type:"button",onClick:()=>(async s=>{const a=e[s];if(!a)return;n(!0);const i=new FormData;i.append("document",a),i.append("documentType",s);try{const e=localStorage.getItem("token"),a=await fetch("/api/student/documents",{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:i});if(a.ok){await a.json(),alert("".concat(s," uploaded successfully!")),t(e=>(0,l.A)((0,l.A)({},e),{},{[s]:null}));const e=document.querySelector('input[type="file"][data-doctype="'.concat(s,'"]'));e&&(e.value="")}else{const e=await a.json();alert("Upload failed: ".concat(e.message||"Please try again."))}}catch(r){console.error("Upload error:",r),alert("Upload failed. Please try again.")}finally{n(!1)}})(a),disabled:s,children:s?"Uploading...":"Upload"})]})]},a))})]})};s(1627);const k=()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!0);(0,a.useEffect)(()=>{r()},[]);const r=async()=>{try{const e=localStorage.getItem("token"),s=await fetch("/api/student/documents",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){const e=await s.json();t(e.documents)}else alert("Failed to fetch documents")}catch(e){console.error("Fetch error:",e),alert("Failed to fetch documents")}finally{n(!1)}};return s?(0,i.jsx)("div",{children:"Loading documents..."}):(0,i.jsxs)("div",{className:"view-documents",children:[(0,i.jsx)("h2",{children:"View Documents"}),0===e.length?(0,i.jsx)("p",{children:"No documents found. Please upload your documents first."}):(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Document Type"}),(0,i.jsx)("th",{children:"Status"}),(0,i.jsx)("th",{children:"Uploaded Date"}),(0,i.jsx)("th",{children:"Action"})]})}),(0,i.jsx)("tbody",{children:e.map((e,t)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.type}),(0,i.jsx)("td",{children:e.status}),(0,i.jsx)("td",{children:e.uploadedAt?new Date(e.uploadedAt).toLocaleDateString():"N/A"}),(0,i.jsx)("td",{children:e.fileName?(0,i.jsx)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("token"),s=await fetch("/api/student/documents/download/".concat(encodeURIComponent(e)),{headers:{Authorization:"Bearer ".concat(t)}});if(s.ok){const t=await s.blob(),a=window.URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=e,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(a),document.body.removeChild(n)}else alert("Download failed")}catch(t){console.error("Download error:",t),alert("Download failed")}})(e.type),children:"Download"}):(0,i.jsx)("span",{children:"Not Uploaded"})})]},t))})]})]})};s(7091);const _=()=>{const[e,t]=(0,a.useState)("Dashboard"),[s,r]=(0,a.useState)(null),l={Dashboard:d,"Student Profile":o,"Detailed Profile":c,"Upload Photo":h.default,"View Assignments":p,"Submit Assignment":x,Circulars:g,"View Fee Ledger":j,"View Concessions":y,"View Notifications":f,"Download Receipts":b,"View Fees":v.A,"Raise Complaint":w,"My Complaints":S,Attendance:C,"Notice Board":A,"Upload Documents":D,"View Documents":k,"Change Password":N};return(0,i.jsxs)("div",{className:"admin-panel",children:[(0,i.jsxs)("nav",{className:"side-nav",children:[(0,i.jsx)("h2",{children:"Student Panel"}),(0,i.jsx)("ul",{className:"nav-menu",children:[{name:"Dashboard",sub:[]},{name:"Profile",sub:["Student Profile","Detailed Profile"]},{name:"Upload Photo",sub:[]},{name:"Assignments",sub:["View Assignments","Submit Assignment"]},{name:"Circulars",sub:[]},{name:"Fees",sub:["View Fee Ledger","View Concessions","View Notifications","Download Receipts","View Fees"]},{name:"Complaints",sub:["Raise Complaint","My Complaints"]},{name:"Attendance",sub:[]},{name:"Notice Board",sub:[]},{name:"Student Documents",sub:["Upload Documents","View Documents"]},{name:"Change Password",sub:[]}].map(a=>(0,i.jsxs)("li",{className:a.sub.length>0&&s===a.name?"open":"",children:[(0,i.jsxs)("button",{className:0===a.sub.length&&e===a.name?"active":"",onClick:()=>(e=>{0===e.sub.length?(t(e.name),r(null)):r(t=>t===e.name?null:e.name)})(a),children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[0===a.sub.length?(0,i.jsx)(n.NfF,{}):(0,i.jsx)(n.M1W,{})," ",a.name]}),a.sub.length>0&&(0,i.jsx)("span",{className:"arrow ".concat(s===a.name?"rotated":""),children:"\u25bc"})]}),a.sub.length>0&&(0,i.jsx)("ul",{className:"sub-menu ".concat(s===a.name?"open":""),children:a.sub.map(s=>(0,i.jsx)("li",{children:(0,i.jsx)("button",{className:e===s?"active":"",onClick:()=>{t(s)},children:s})},s))})]},a.name))})]}),(0,i.jsx)("main",{className:"content",style:{marginTop:"80px"},children:(()=>{const t=l[e];return t?(0,i.jsx)(t,{}):(0,i.jsx)(d,{})})()})]})}},7091:()=>{}}]);
//# sourceMappingURL=359.3b01a3a6.chunk.js.map