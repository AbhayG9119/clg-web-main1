{"version":3,"file":"static/js/257.a46d5930.chunk.js","mappings":"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","sources":["components/Staff Pannel/UploadPhoto.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst UploadPhoto = () => {\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [preview, setPreview] = useState(null);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [error, setError] = useState('');\r\n  const fileInputRef = useRef(null);\r\n\r\n  const handleFileSelect = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      // Validate file type\r\n      const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];\r\n      if (!allowedTypes.includes(file.type)) {\r\n        setError('Please select a valid image file (JPEG, PNG, GIF)');\r\n        return;\r\n      }\r\n\r\n      // Validate file size (5MB limit)\r\n      if (file.size > 5 * 1024 * 1024) {\r\n        setError('File size must be less than 5MB');\r\n        return;\r\n      }\r\n\r\n      setSelectedFile(file);\r\n      setError('');\r\n\r\n      // Create preview\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => setPreview(e.target.result);\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (!selectedFile) {\r\n      setError('Please select a file first');\r\n      return;\r\n    }\r\n\r\n    setUploading(true);\r\n    setError('');\r\n    setMessage('');\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const formData = new FormData();\r\n      formData.append('profilePicture', selectedFile);\r\n\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      };\r\n\r\n      const response = await axios.post('http://localhost:5000/api/staff/profile-picture', formData, config);\r\n\r\n      setMessage('Profile picture uploaded successfully!');\r\n      setSelectedFile(null);\r\n      setPreview(null);\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n\r\n      // Optionally refresh the page or update parent component\r\n      setTimeout(() => {\r\n        window.location.reload(); // Simple refresh to show new picture\r\n      }, 1500);\r\n\r\n    } catch (error) {\r\n      setError(error.response?.data?.message || 'Failed to upload profile picture');\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setSelectedFile(null);\r\n    setPreview(null);\r\n    setError('');\r\n    setMessage('');\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"upload-photo-container\">\r\n      <h1>Upload Profile Photo</h1>\r\n      <p>Upload and crop profile picture for ID card, attendance logs, and dashboard.</p>\r\n\r\n      {error && <div className=\"error-message\" style={{ color: 'red', marginBottom: '10px' }}>{error}</div>}\r\n      {message && <div className=\"success-message\" style={{ color: 'green', marginBottom: '10px' }}>{message}</div>}\r\n\r\n      <div className=\"upload-section\">\r\n        <input\r\n          type=\"file\"\r\n          ref={fileInputRef}\r\n          onChange={handleFileSelect}\r\n          accept=\"image/*\"\r\n          style={{ marginBottom: '10px' }}\r\n        />\r\n\r\n        {preview && (\r\n          <div className=\"preview-section\" style={{ marginBottom: '20px' }}>\r\n            <h3>Preview:</h3>\r\n            <img\r\n              src={preview}\r\n              alt=\"Profile Preview\"\r\n              style={{\r\n                maxWidth: '200px',\r\n                maxHeight: '200px',\r\n                borderRadius: '50%',\r\n                objectFit: 'cover',\r\n                border: '2px solid #ccc'\r\n              }}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"upload-actions\">\r\n          <button\r\n            onClick={handleUpload}\r\n            disabled={!selectedFile || uploading}\r\n            style={{\r\n              padding: '10px 20px',\r\n              marginRight: '10px',\r\n              backgroundColor: selectedFile && !uploading ? '#007bff' : '#ccc',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              cursor: selectedFile && !uploading ? 'pointer' : 'not-allowed'\r\n            }}\r\n          >\r\n            {uploading ? 'Uploading...' : 'Upload Photo'}\r\n          </button>\r\n\r\n          <button\r\n            onClick={handleCancel}\r\n            disabled={uploading}\r\n            style={{\r\n              padding: '10px 20px',\r\n              backgroundColor: '#6c757d',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              cursor: uploading ? 'not-allowed' : 'pointer'\r\n            }}\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"upload-info\" style={{ marginTop: '20px', fontSize: '14px', color: '#666' }}>\r\n        <p><strong>Supported formats:</strong> JPEG, PNG, GIF</p>\r\n        <p><strong>Maximum file size:</strong> 5MB</p>\r\n        <p><strong>Recommended:</strong> Square images (1:1 aspect ratio) for best results</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UploadPhoto;\r\n"],"names":["UploadPhoto","selectedFile","setSelectedFile","useState","preview","setPreview","uploading","setUploading","message","setMessage","error","setError","fileInputRef","useRef","_jsxs","className","children","_jsx","style","color","marginBottom","type","ref","onChange","event","file","target","files","includes","size","reader","FileReader","onload","e","result","readAsDataURL","accept","src","alt","maxWidth","maxHeight","borderRadius","objectFit","border","onClick","async","token","localStorage","getItem","formData","FormData","append","config","headers","Authorization","concat","axios","post","current","value","setTimeout","window","location","reload","_error$response","_error$response$data","response","data","disabled","padding","marginRight","backgroundColor","cursor","handleCancel","marginTop","fontSize"],"sourceRoot":""}